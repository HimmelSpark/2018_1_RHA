{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/js/modules/bus.js","webpack:///./public/js/modules/userModel.js","webpack:///./node_modules/pug-runtime/index.js","webpack:///./public/js/components/views/baseView.js","webpack:///./public/js/modules/router.js","webpack:///./public/js/components/blocks/input/input.js","webpack:///./public/js/components/forms/form.js","webpack:///./public/js/modules/game/config/modes.js","webpack:///./public/js/modules/game/config/playerStates.js","webpack:///./public/js/modules/validator.js","webpack:///./public/js/components/blocks/block.js","webpack:///./public/js/modules/game/animation/animate.js","webpack:///./public/js/modules/game/player/player.js","webpack:///./public/js/conf/route.js","webpack:///./public/js/components/views/gameView/gameTemplate.pug","webpack:///./public/js/modules/game/config/coordinate.js","webpack:///./public/js/modules/ws.js","webpack:///./public/js/modules/game/animation/attack/attackAnimation.pug","webpack:///./public/js/modules/game/player/botPlayer.js","webpack:///./public/js/modules/game/helperFuncs/renderScene.js","webpack:///./public/js/modules/game/player/mainPlayer.js","webpack:///./public/js/modules/game/game.js","webpack:///./public/js/modules/http.js","webpack:///./public/js/components/views/gameView/gameView.js","webpack:///./public/js/components/views/menuView/menu.pug","webpack:///./public/js/components/views/menuView/menuView.js","webpack:///./public/js/components/views/loginView/login.pug","webpack:///./public/js/components/forms/loginForm.js","webpack:///./public/js/components/views/loginView/loginView.js","webpack:///./public/js/components/views/ratingView/rating.pug","webpack:///./public/js/modules/userController.js","webpack:///./public/js/components/views/ratingView/ratingView.js","webpack:///./public/js/components/views/profileView/profile.pug","webpack:///./public/js/components/forms/loadPictureForm/loadPictureForm.js","webpack:///./public/js/components/render/render.js","webpack:///./public/js/modules/sectionSwitcher.js","webpack:///./public/js/components/blocks/button.js","webpack:///./public/js/components/forms/changeForm.js","webpack:///./public/js/components/views/profileView/profileView.js","webpack:///./public/js/components/views/registerView/register.pug","webpack:///./public/js/components/blocks/input/input.pug","webpack:///./public/js/components/forms/registerForm.js","webpack:///./public/js/components/views/registerView/registerView.js","webpack:///./public/js/modules/game/player/webPlayer.js","webpack:///./public/js/modules/game/helperFuncs/renderInfoAboutRegion.js","webpack:///./public/js/modules/game/math/inHex.js","webpack:///./public/js/modules/game/gameScene.js","webpack:///./public/js/modules/game/controller.js","webpack:///./public/js/modules/game/helperFuncs/timer.js","webpack:///./public/js/modules/game/helperFuncs/battleCalc.js","webpack:///./public/js/modules/game/animation/move/moveAnimation.js","webpack:///./public/js/modules/game/animation/animationOverlay.js","webpack:///./public/js/modules/game/animation/attack/attackAnimation.js","webpack:///./public/js/modules/game/gameManager.js","webpack:///./public/js/modules/game/config/reach.js","webpack:///./public/js/modules/graphics/hexagon.js","webpack:///./public/js/modules/game/components/region.js","webpack:///./public/js/modules/game/math/getRandom.js","webpack:///./public/js/components/views/multiplayerView/multiplayerView.js","webpack:///./public/js/application.js","webpack:///./public/js/components/radar/radar.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Bus","_classCallCheck","this","__instance","listeners","event","listener","_this","push","off","Array","isArray","filter","element","payload","forEach","curUser","User","data","email","username","rating","Promise","resolve","reject","http","route","userAPIMethods","user","err","resp","status","then","promiseValue","userData","post","login","console","log","auth","signup","logout","updateUser","updateAvatar","pug_has_own_property","pug_classes","val","escaping","className","classString","padding","escapeEnabled","length","pug_escape","pug_classes_array","key","pug_classes_object","pug_style","out","style","pug_attr","escaped","terse","toJSON","JSON","stringify","indexOf","replace","merge","pug_merge","a","b","arguments","attrs","valA","concat","valB","classes","attr","obj","pug_match_html","_html","html","regexResult","exec","lastIndex","escape","result","index","charCodeAt","substring","rethrow","pug_rethrow","filename","lineno","str","Error","window","message","readFileSync","ex","context","lines","split","start","Math","max","end","min","slice","map","line","curr","join","path","_userModel","Section","isAuthorized","_sectionSwitcher","Router","root","global","startRoot","document","getElementById","gameRoot","active","View","view","rootForSwitch","hidden","allowed","history","replaceState","open","location","pathname","pushState","sectionSwitcher","changeSection","render","addEventListener","bind","evt","target","tagName","toLowerCase","preventDefault","href","_block","generateInput","Input","_possibleConstructorReturn","__proto__","getPrototypeOf","wrapper","createElement","CLASS","type","innerHTML","placeholder","id","error_id","ErrorElement","getElementsByTagName","InputElement","Block","error","classList","add","display","remove","callbackfn","Form","formElement","reset","GameModes","singleplayer","multiplayer","DEFAULT","READY","DISABLED","WON","LOSE","Validator","emailElem","getData","test","setError","nameElem","passElem","confElem","animate","draw","duration","performance","now","requestAnimationFrame","time","timePassed","_playerStates","_renderScene","Player","color","canvas","img","score","resources","allRegions","regions","PLAYER_STATES","region","newRegion","area","setColor","renderScene","reColor","owner","reg","splice","serverUrl","leaderBoard","pug","locals","pug_html","locals_for_with","height","width","undefined","amountofCoorX","amountofCoorY","Coordinate","game_canvas","xSize","ySize","lengthSide","allowedCoord","x","y","neighbour","_bus","Ws","address","ws","WebSocket","onopen","bus","emit","onmessage","handleMessage","onclose","e","messageText","parse","class","send","BotPlayer","_this2","on","dict","attackers","attacker","_getRandom2","default","from","to","setTimeout","ctx","getContext","clearRect","drawImage","renderHex","MainPlayer","_modes","Game","mode","coordinate","changeBut","game_ctx","scene","controller","Controller","players","player","arr","Region","setAllRegtions","temp","setGlobalRegions","GameScene","manager","GameManager","initData","getCurUser","indexPlayer","botPlayer","units","String","webPlayer","WebPlayer","onListeners","stop","destroy","_route","HttpService","url","request","response","json","body","requestMethod","headers","Headers","append","req","method","credentials","fetch","config","generateCanvas","GameSection","parent","innerWidth","height_canv","innerHeight","appendChild","marginTop","Image","src","load","onload","setWindowResizeHandler","getElementsByClassName","game","alert","go","_this3","_computeCanvasSize","computeCanvasSize","_computeCanvasSize2","_slicedToArray","reSize","pug_interp","$$obj","pug_index0","$$l","title","generateMenu","MenuSection","sign","menu","attrsActive","attrPassive","setAttribute","innerText","logoutWrapper","allow","hide","LoginForm","Email","password","Password","InputSubmit","setOnInputChange","checkMail","checkPass","ev","generateLogin","LoginSection","after","loginForm","firstChild","insertBefore","setOnSubmit","jsonUserData","page","pages","fuck","keys","values","userController","UserController","signUp","catch","signIn","update","avatar","uploadAvatar","toString","generateRating","RatingSection","paginationWrap","prevButt","removeChild","nextButt","empty","lastPage","backButtWrap","backButt","users","table","_this4","LoadForm","UploadInput","getFormData","UploadSubmit","child","_render","SectionSwitcher","newSection","rootForElement","_render2","Button","buttonWrapper","buttonElement","ChangeForm","oldp","OldPassword","newp","RepeatPassword","checkConfirm","generateProfile","ProfileSection","profileElement","profileTable","fileForm","changeForm","setOnClick","file","formData","FormData","upload","files","RegisterForm","Name","ConfirmPassword","checkName","generateRegister","RegisterSection","register","registerForm","_player","aboutRegion","curRegion","domElem","gameData","xp","yp","npol","j","_renderInfoAboutRegion","about_region","setPlayersRegions","curP","currentPlayer","_inHex2","current","label","selected","addRegion","curPlayer","coordinates","isRegion","isTheRegionOfPlayer","activeRegion","new","isNeighbour","nextPlayer","next","regs","cur","onclick","offsetX","offsetY","mousemove","contextmenu","clickChangeBut","removeEventListener","timer","htmlElement","sec","isPaused","g","setInterval","clearInterval","battleCalc","firstRegion","secondRegion","_animate","generateAttack","moveAnimation","x2","y2","wrapAnim","cw","ch","lWidth","getComputedStyle","match","mTop","Number","sqrt","curLength","curX","curY","arrowX","arrowY","arrowX2","arrowY2","constX","constY","diff","part","gradient","createLinearGradient","gradientStroke","toFixed","lineWidth","addColorStop","fillStyle","strokeStyle","moveTo","lineTo","stroke","fill","lastChild","animationOverlay","PI","beginPath","arc","attackAnimation","radius","startX","sin","startY","endX","endY","secondX","_attackAnimation","_animationOverlay","_moveAnimation","_battleCalc","_timer","select_region","setStroke","change_selection","setNewColor","setActiveColor","attack","xC","yC","fromWin","getColor","delRegion","setStatus","change_move","illum_cur","move_units","reachMatrix","Hexagon","strokeColor","R","dR","lineJoin","closePath","_reach","allowedCoordinates","setBusListeners","globalRegions","number","init","num","removeNeighbour","f","floor","random","MultiplayerSection","globalRoot","radar","diameter","offsetHeight","offsetWidth","Sketch","create","container","fullscreen","dToR","degrees","sweepAngle","hueDiff","abs","hueEnd","marginLeft","clear","globalCompositeOperation","fillRect","TWO_PI","renderRings","save","translate","rotate","restore","renderScanLines"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 90);\n","'use strict';\n\n/**\n * Модуль event-bus медиатора\n * @module EventBus\n */\nclass Bus {\n\t/**\n     * @constructor\n     */\n\tconstructor() {\n\t\tif (Bus.__instance) {\n\t\t\treturn Bus.__instance;\n\t\t}\n\t\tthis.listeners = {};\n\t\tBus.__instance = this;\n\t}\n\n\t/**\n     * Зарегистрировать обработчик события\n     * @param {string} event - название события\n     * @param {function} listener - обработчик события\n     * @return {function(this:Bus)} - функция отписки от события\n     */\n\ton(event, listener) {\n\t\tthis.listeners[event] = this.listeners[event] || [];\n\t\tthis.listeners[event].push(listener);\n\t\treturn (() => {\n\t\t\tthis.off(event, listener);\n\t\t});\n\t}\n\n\t/**\n     * Отписаться от события\n     * @param {string} event - название события\n     * @param {function} listener - обработчик события\n     */\n\toff(event, listener) {\n\t\tif (Array.isArray(this.listeners[event])) {\n\t\t\tthis.listeners[event] = this.listeners[event]\n\t\t\t\t.filter((element) => {\n\t\t\t\t\treturn element !== listener;\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n     * Заэмиттить событие\n     * @param {string} event - название события\n     * @param {*} [payload] - объект с данными\n     */\n\temit(event, payload) {\n\t\tif (Array.isArray(this.listeners[event])) {\n\t\t\tthis.listeners[event].forEach((listener) => {\n\t\t\t\tlistener({\n\t\t\t\t\tevent: event,\n\t\t\t\t\tpayload: payload,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport default new Bus();\n","import http from './http.js';\nimport route from '../conf/route.js';\n\n/**\n * Class represents Model of User to store and manage user data\n */\nlet curUser = null;\nexport default class User {\n\t/**\n     * Creates user and loads user data\n     */\n\tconstructor(data) {\n\t\tthis.email = data.email;\n\t\tthis.username = data.username;\n\t\tthis.rating = data.rating;\n\t}\n\n\t/**\n\t * Authenticates user\n\t * @return {Promise<any>}\n\t */\n\tstatic auth() {\n\t\t// if (curUser) {\n\t\t//     resolve(curUser);\n\t\t// }\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.get(route.userAPIMethods.user, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (err.status === 401) {\n\t\t\t\t\t\tcurUser = null;\n\t\t\t\t\t\treturn resolve(null);\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tresp.then(\n\t\t\t\t\tpromiseValue => {\n\t\t\t\t\t\tcurUser = new User(promiseValue.data);\n\t\t\t\t\t\tresolve(curUser);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * If user authorized\n\t * @return {boolean}\n\t */\n\tstatic isAuthorized() {\n\t\treturn !!curUser;\n\t}\n\n\t/**\n\t * Returns current user\n\t * @return {User}\n\t */\n\tstatic getCurUser() {\n\t\treturn curUser;\n\t}\n\n\t/**\n\t * Signs user in\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic signIn(userData) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.login, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * signs user Up\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic signUp(userData) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.signup, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * logs user Off\n\t * @return {Promise<any>}\n\t */\n\tstatic logout() {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.logout, {}, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * updates user data\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic update(userData) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.updateUser, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * uploads user's avatar\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic uploadAvatar(userData) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.updateAvatar, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t});\n\t\t});\n\t}\n}","'use strict';\n\nvar pug_has_own_property = Object.prototype.hasOwnProperty;\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = pug_merge;\nfunction pug_merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = pug_merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n\n  for (var key in b) {\n    if (key === 'class') {\n      var valA = a[key] || [];\n      a[key] = (Array.isArray(valA) ? valA : [valA]).concat(b[key] || []);\n    } else if (key === 'style') {\n      var valA = pug_style(a[key]);\n      valA = valA && valA[valA.length - 1] !== ';' ? valA + ';' : valA;\n      var valB = pug_style(b[key]);\n      valB = valB && valB[valB.length - 1] !== ';' ? valB + ';' : valB;\n      a[key] = valA + valB;\n    } else {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Process array, object, or string as a string of classes delimited by a space.\n *\n * If `val` is an array, all members of it and its subarrays are counted as\n * classes. If `escaping` is an array, then whether or not the item in `val` is\n * escaped depends on the corresponding item in `escaping`. If `escaping` is\n * not an array, no escaping is done.\n *\n * If `val` is an object, all the keys whose value is truthy are counted as\n * classes. No escaping is done.\n *\n * If `val` is a string, it is counted as a class. No escaping is done.\n *\n * @param {(Array.<string>|Object.<string, boolean>|string)} val\n * @param {?Array.<string>} escaping\n * @return {String}\n */\nexports.classes = pug_classes;\nfunction pug_classes_array(val, escaping) {\n  var classString = '', className, padding = '', escapeEnabled = Array.isArray(escaping);\n  for (var i = 0; i < val.length; i++) {\n    className = pug_classes(val[i]);\n    if (!className) continue;\n    escapeEnabled && escaping[i] && (className = pug_escape(className));\n    classString = classString + padding + className;\n    padding = ' ';\n  }\n  return classString;\n}\nfunction pug_classes_object(val) {\n  var classString = '', padding = '';\n  for (var key in val) {\n    if (key && val[key] && pug_has_own_property.call(val, key)) {\n      classString = classString + padding + key;\n      padding = ' ';\n    }\n  }\n  return classString;\n}\nfunction pug_classes(val, escaping) {\n  if (Array.isArray(val)) {\n    return pug_classes_array(val, escaping);\n  } else if (val && typeof val === 'object') {\n    return pug_classes_object(val);\n  } else {\n    return val || '';\n  }\n}\n\n/**\n * Convert object or string to a string of CSS styles delimited by a semicolon.\n *\n * @param {(Object.<string, string>|string)} val\n * @return {String}\n */\n\nexports.style = pug_style;\nfunction pug_style(val) {\n  if (!val) return '';\n  if (typeof val === 'object') {\n    var out = '';\n    for (var style in val) {\n      /* istanbul ignore else */\n      if (pug_has_own_property.call(val, style)) {\n        out = out + style + ':' + val[style] + ';';\n      }\n    }\n    return out;\n  } else {\n    return val + '';\n  }\n};\n\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = pug_attr;\nfunction pug_attr(key, val, escaped, terse) {\n  if (val === false || val == null || !val && (key === 'class' || key === 'style')) {\n    return '';\n  }\n  if (val === true) {\n    return ' ' + (terse ? key : key + '=\"' + key + '\"');\n  }\n  if (typeof val.toJSON === 'function') {\n    val = val.toJSON();\n  }\n  if (typeof val !== 'string') {\n    val = JSON.stringify(val);\n    if (!escaped && val.indexOf('\"') !== -1) {\n      return ' ' + key + '=\\'' + val.replace(/'/g, '&#39;') + '\\'';\n    }\n  }\n  if (escaped) val = pug_escape(val);\n  return ' ' + key + '=\"' + val + '\"';\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} terse whether to use HTML5 terse boolean attributes\n * @return {String}\n */\nexports.attrs = pug_attrs;\nfunction pug_attrs(obj, terse){\n  var attrs = '';\n\n  for (var key in obj) {\n    if (pug_has_own_property.call(obj, key)) {\n      var val = obj[key];\n\n      if ('class' === key) {\n        val = pug_classes(val);\n        attrs = pug_attr(key, val, false, terse) + attrs;\n        continue;\n      }\n      if ('style' === key) {\n        val = pug_style(val);\n      }\n      attrs += pug_attr(key, val, false, terse);\n    }\n  }\n\n  return attrs;\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar pug_match_html = /[\"&<>]/;\nexports.escape = pug_escape;\nfunction pug_escape(_html){\n  var html = '' + _html;\n  var regexResult = pug_match_html.exec(html);\n  if (!regexResult) return _html;\n\n  var result = '';\n  var i, lastIndex, escape;\n  for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {\n    switch (html.charCodeAt(i)) {\n      case 34: escape = '&quot;'; break;\n      case 38: escape = '&amp;'; break;\n      case 60: escape = '&lt;'; break;\n      case 62: escape = '&gt;'; break;\n      default: continue;\n    }\n    if (lastIndex !== i) result += html.substring(lastIndex, i);\n    lastIndex = i + 1;\n    result += escape;\n  }\n  if (lastIndex !== i) return result + html.substring(lastIndex, i);\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the pug in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @param {String} str original source\n * @api private\n */\n\nexports.rethrow = pug_rethrow;\nfunction pug_rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    pug_rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Pug') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n","import User from '../../modules/userModel.js';\n\n/**\n * Class represents generic Section\n */\nexport default class Section {\n\tconstructor() {\n\t\tUser.isAuthorized();\n\t}\n\n\t/**\n     * Should be overriden\n     */\n\trender() {\n\t}\n\n\tallowed() {\n\t\treturn false;\n\t}\n\n\n}\n","import {sectionSwitcher} from './sectionSwitcher.js';\n\n/**\n * Class representing router\n */\nexport default class Router {\n\n\t/**\n\t * Creates router\n\t * @param root\n\t * @param global\n\t * @return {Router|*}\n\t */\n\tconstructor(root, global) {\n\n\t\tif (Router.__instance) {\n\t\t\treturn Router.__instance;\n\t\t}\n\n\t\tthis.root = root;\n\t\tthis.startRoot = document.getElementById('start');\n\t\tthis.gameRoot = document.getElementById('game');\n\t\tthis.map = {};\n\t\tthis.global = global;\n\t\tthis.active = null;\n\n\t\tRouter.__instance = this;\n\t}\n\n\t/**\n\t * adds new page to router\n\t * @param path\n\t * @param View\n\t * @return {Router}\n\t */\n\tadd(path, View) {\n\t\tthis.map[path] = new View(this.root);\n\t\treturn this;\n\t}\n\n\t/**\n\t * opens the page\n\t * @param path\n\t */\n\topen(path) {\n\t\tconsole.log('open');\n\t\tconst view = this.map[path];\n\t\tlet rootForSwitch;\n\t\tif (path === '/singleplayer' || path === '/multiplayer') {\n\t\t\tconsole.log('if');\n\t\t\trootForSwitch =  this.gameRoot;\n\t\t\tthis.startRoot.hidden = true;\n\t\t\trootForSwitch.hidden = false;\n\t\t} else {\n\t\t\tconsole.log('else');\n\t\t\trootForSwitch = this.root;\n\t\t\tthis.startRoot.hidden = false;\n\t\t\tthis.gameRoot.hidden = true;\n\t\t}\n\n\t\tconsole.log('view ', path, 'is allowed: ', view.allowed());\n\t\tif (!view.allowed()) {\n\t\t\twindow.history.replaceState(null, '', '/');\n\t\t\tthis.open('/');\n\t\t\treturn;\n\t\t}\n\t\tif (window.location.pathname !== path) {\n\t\t\twindow.history.pushState(null, '', path);\n\t\t}\n\n\t\t// if (path === '/game') {\n\t\t// \tsectionSwitcher.changeSection(view.render(), this.global);\n\t\t// }\n\t\tsectionSwitcher.changeSection(view.render(), rootForSwitch);\n\t}\n\n\t/**\n\t * Starts the router\n\t */\n\tstart() {\n\t\twindow.addEventListener('popstate', function () {\n\t\t\tthis.open(window.location.pathname);\n\t\t}.bind(this));\n\n\t\tthis.root.addEventListener('click', function (evt) {\n\t\t\tif (evt.target.tagName.toLowerCase() === 'a') {\n\t\t\t\tevt.preventDefault();\n\t\t\t\twindow.history.pushState(null, '', evt.target.href);\n\t\t\t\tthis.open(evt.target.pathname);\n\t\t\t}\n\t\t}.bind(this));\n\t\tconsole.log(window.location.pathname);\n\t\tthis.open(window.location.pathname);\n\t}\n}","/* eslint-disable no-undef */\nimport Block from '../block.js';\nlet generateInput = require('./input.pug');\n/** Class representing Input */\nexport default class Input extends Block {\n\t/**\n     * Creates input\n     * @param {object} data – contains type, value and placeholder\n     */\n\tconstructor(data) {\n\t\tsuper();\n\n\n\t\tthis.status = true; //заглушка\n\n\t\tthis.wrapper = document.createElement('div');\n\t\t//TODO здесь надо указать все типы инпутов, которым не нужна лампа\n\n\t\tlet CLASS = 'input';\n\t\tif (data.type === 'submit') {\n\t\t\tCLASS = 'button';\n\t\t}\n\t\tthis.wrapper.innerHTML += generateInput({\n\t\t\ttype: data.type,\n\t\t\tplaceholder: data.placeholder,\n\t\t\tvalue: data.value,\n\t\t\tid: data.id,\n\t\t\terror_id: data.id.concat('_error'),\n\t\t\tCLASS: CLASS\n\t\t});\n\t\tthis.ErrorElement = this.wrapper.getElementsByTagName('div')[0];\n\t\tthis.InputElement = this.wrapper.getElementsByTagName('input')[0];\n\t}\n\n\t/**\n     * Returns input DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\treturn this.wrapper;\n\t}\n\n\t/**\n     * For validation process\n     * @return {boolean} – true if valid\n     */\n\tgetState() {\n\t\treturn this.status;\n\t}\n\n\t/**\n     * Returns input data\n     * @return {string}\n     */\n\tgetData() {\n\t\treturn this.InputElement.value;\n\t}\n\tgetFormData() {\n\t\treturn this.InputElement;\n\t}\n\n\t/**\n     * To set error message or unset error\n     * @param {string} error\n     */\n\tsetError(error) {\n\t\tif (error) {\n\t\t\tthis.status = false;\n\t\t\tthis.ErrorElement.innerHTML = error;\n\t\t\tthis.InputElement.classList.add('input__error');\n\t\t} else {\n\t\t\tthis.status = true;\n\t\t\tthis.ErrorElement.style.display = 'none';\n\t\t\tthis.InputElement.classList.remove('input__error');\n\t\t}\n\t}\n\n\n\t//TODO: в качестве коллбека можешь передать методы валидатора, тогда ему будут видны поля этого класса\n\t/**\n     * Defines behaviour on change\n     * @param {function} callbackfn – input data change handler\n     */\n\tsetOnInputChange(callbackfn) {\n\t\tthis.InputElement.addEventListener('change', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","import Block from '../blocks/block.js';\n\n/** Class representing generic form */\nexport default class Form extends Block {\n\t/**\n     * Create a form\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.formElement = document.createElement('form');\n\t}\n\n\t/**\n     * should be overriden\n     */\n\trender() {\n\n\t}\n\n\t/**\n     * to reset form data\n     */\n\treset() {\n\t\tthis.formElement.reset();\n\t}\n\n\t/**\n     * should be overriden\n     */\n\tsetOnSubmit() {\n\t}\n\n\t//TODO после сабмита пробежишься по всем инпутам и проверяешь их стейты\n\t//TODO если что-то не так, то тогда от компоненты вызываешь setError, который должен разхидить errorElement\n}","export const GameModes = {\n\tsingleplayer: 1,\n\tmultiplayer: 2\n};","/**\n * for player management\n * @type {{DEFAULT: number, READY: number, DISABLED: number, WON: number, LOSE: number}}\n */\nconst PLAYER_STATES = {\n\tDEFAULT : 1,\n\tREADY : 2,\n\tDISABLED : 3,\n\tWON : 4,\n\tLOSE: 5\n};\nexport default PLAYER_STATES;","/**\n * Class represents set of tools to validate forms\n */\nexport default class Validator {\n\n\t/**\n     * Validation of Email input\n     * @param emailElem\n     */\n\tstatic checkMail(emailElem) {\n\n\t\tconst email = emailElem.getData();\n\t\tconst pattern = /([\\w-]+)@([\\w-]+)(\\.[\\w]+)/;\n\t\tif (pattern.test(email) === false) {\n\t\t\temailElem.setError('incorrect email');\n\t\t} else {\n\t\t\temailElem.setError(null);\n\t\t}\n\t}\n\n\t/**\n     * Validation of Name input\n     * @param nameElem\n     */\n\tstatic checkName(nameElem) {\n\t\tconst name = nameElem.getData();\n\t\tconst pattern = /^[a-zA-Z0-9_-]{3,16}$/;\n\t\tif (pattern.test(name)) {\n\t\t\tnameElem.setError(null);\n\t\t} else {\n\t\t\tnameElem.setError('incorrect name');\n\t\t}\n\t}\n\n\t/**\n     * Validation of Password input\n     * @param passElem\n     */\n\tstatic checkPass(passElem) {\n\t\tconst pass = passElem.getData();\n\t\tif (pass.length < 8) {\n\t\t\tpassElem.setError('too short password');\n\t\t} else {\n\t\t\tpassElem.setError(null);\n\t\t}\n\t}\n\n\t/**\n     * Validation of PasswordConfirm input\n     * @param passElem\n     * @param confElem\n     */\n\tstatic checkConfirm(passElem, confElem) {\n\t\tif (passElem.getData() !== confElem.getData()) {\n\t\t\tconfElem.setError('passwords do not match');\n\t\t} else {\n\t\t\tconfElem.setError(null);\n\t\t}\n\t}\n}","export default class Block {\n/**\n* should be overriden\n*/\n\trender() {}\n}","export const animate = (draw, duration) => {\n\tconst start = performance.now();\n\trequestAnimationFrame(function animate(time) {\n\t\tlet timePassed = time - start;\n\t\tif (timePassed > duration) timePassed = duration;\n\t\tdraw(timePassed);\n\t\tif (timePassed < duration) {\n\t\t\trequestAnimationFrame(animate);\n\t\t}\n\t});\n};","import PLAYER_STATES from '../config/playerStates.js';\nimport {renderScene} from '../helperFuncs/renderScene.js';\n\n/**\n * Class representing generic game Player\n */\nexport default class Player {\n\t/**\n\t * Creates player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color, canvas,  img) {\n\t\tthis.score = 0;\n\t\tthis.resources = 0;\n\t\tthis.canvas = canvas;\n\t\tthis.allRegions = null;\n\t\tthis.img = img;\n\t\tthis.regions = [];\n\t\tthis.status = PLAYER_STATES.DISABLED;\n\t\tthis.color = color;\n\t\tthis.name = name;\n\t}\n\n\tsetAllRegtions(regions) {\n\t\tthis.allRegions = regions;\n\t}\n\n\t/**\n\t * should be overriden\n\t */\n\tinit() {\n\n\t}\n\n\t/**\n\t * Принадлежит ли данный регион игроку\n\t * @param region\n\t * @return {boolean}\n\t */\n\tisTheRegionOfPlayer(region) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i].name === region.name) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Gives the player new region\n\t * @param newRegion\n\t */\n\taddRegion(newRegion) {\n\t\tnewRegion.area.setColor(this.color);\n\t\trenderScene(this.canvas, this.allRegions, this.img);\n\t\tnewRegion.area.reColor(this.color);\n\t\tnewRegion.owner = this;\n\t\tthis.regions.push(newRegion);\n\t}\n\n\t/**\n\t * deletes region\n\t * @param reg\n\t */\n\tdelRegion(reg) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i] === reg) {\n\t\t\t\tthis.regions.splice(i,1);\n\t\t\t}\n\t\t}\n\t\tif (this.regions.length === 0) {\n\t\t\tthis.status = PLAYER_STATES.LOSE;\n\t\t}\n\t}\n\n\t/**\n\t * sets player's status\n\t * @param status\n\t */\n\tsetStatus(status) {\n\t\tthis.status = status;\n\t}\n}","\nconst serverUrl = 'https://rha-backend.herokuapp.com/';\n//const serverUrl = 'http://localhost:5000/';\n\n/**\n * Contains methods' paths of user API\n * @type {{login: string, signup: string, logout: string, user: string, updateUser: string, leaderBoard: string}}\n */\nconst userAPIMethods = {\n\tlogin: 'users/auth',\n\tsignup: 'users/create',\n\tlogout: 'users/logout',\n\tuser: 'users/info',\n\tupdateUser: 'users/chpwd',\n\tleaderBoard: 'users/rating',\n\tupdateAvatar: 'users/chava'\n};\n\n// export const route = {\n//     debug: true\n// };\n\nexport default {serverUrl, userAPIMethods};","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (height, id, width) {pug_html = pug_html + \"\\u003Cdiv class=\\\"info-menu\\\" id=\\\"info-menu\\\"\\u003E\\u003Cdiv class=\\\"about-region\\\" id=\\\"about-region\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"canvas-wrap\\\"\\u003E\\u003Ccanvas\" + (\" class=\\\"canvas\\\"\"+pug.attr(\"width\", width, true, true)+pug.attr(\"height\", height, true, true)+pug.attr(\"id\", id, true, true)) + \"\\u003E\\u003C\\u002Fcanvas\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"log\\\" id=\\\"log\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"control-interface\\\" id=\\\"control-interface\\\"\\u003E\\u003Cdiv class=\\\"change\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"timer\\\" id=\\\"timer\\\"\\u003E30\\u003C\\u002Fdiv\\u003E\";}.call(this,\"height\" in locals_for_with?locals_for_with.height:typeof height!==\"undefined\"?height:undefined,\"id\" in locals_for_with?locals_for_with.id:typeof id!==\"undefined\"?id:undefined,\"width\" in locals_for_with?locals_for_with.width:typeof width!==\"undefined\"?width:undefined));;return pug_html;};\nmodule.exports = template;","\n\n\nconst amountofCoorX = 1000;\nconst amountofCoorY = 610;\n\nexport default class Coordinate {\n\tconstructor(game_canvas) {\n\t\tif (Coordinate.__instance) {\n\t\t\treturn Coordinate.__instance;\n\t\t}\n\t\tCoordinate.__instance = this;\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.xSize = game_canvas.width / amountofCoorX;\n\t\tthis.ySize = game_canvas.height / amountofCoorY;\n\n\n\t\tthis.lengthSide = 90;\n\n\t\tthis.allowedCoord = [\n\t\t\t{\n\t\t\t\tname: 'A',\n\t\t\t\tx: this.xSize * 365,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'C', 'D']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'B',\n\n\t\t\t\tx: (325 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (339 - this.lengthSide * 0.86) * this.ySize,\n\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'C', 'D', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'C',\n\t\t\t\tx: 365 * this.xSize,\n\t\t\t\ty: (339 - this.lengthSide * 0.86 * 2) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'D',\n\t\t\t\tx: (325 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 + this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'E',\n\t\t\t\tx: ((329 + this.lengthSide * 2) + 136) * this.xSize,\n\t\t\t\ty: 343 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'D']\n\t\t\t}\n\t\t];\n\t}\n\n\treSize(game_canvas) {\n\t\tthis.xSize = game_canvas.width / amountofCoorX;\n\t\tthis.ySize = game_canvas.height / amountofCoorY;\n\n\t\t//TODO сделать по-человечески\n\t\tthis.allowedCoord = [\n\t\t\t{\n\t\t\t\tname: 'A',\n\t\t\t\tx: this.xSize * 365,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'C', 'D']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'B',\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'C', 'D', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'C',\n\t\t\t\tx: 365 * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86 * 2) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'D',\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 + this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'E',\n\t\t\t\tx: ((321 + this.lengthSide * 2) + 136) * this.xSize,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'D']\n\t\t\t}\n\t\t];\n\n\t}\n}","import bus from './bus.js';\n\nexport default class Ws {\n\n\tconstructor() {\n\t\tif (Ws.__instance) {\n\t\t\treturn Ws.__instance;\n\t\t}\n\t\tconst address = 'wss://rha-backend.herokuapp.com/multiplayer/rand';\n\t\tthis.ws = new WebSocket(address);\n\t\tthis.ws.onopen = (event) => {\n\t\t\tconsole.log(`WebSocket on address ${address} opened`);\n\t\t\tbus.emit('connected', {});\n\t\t\tthis.ws.onmessage = this.handleMessage.bind(this);\n\n\t\t\tthis.ws.onclose = (e) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tconsole.log('WebSocket closed');\n\t\t\t};\n\t\t};\n\t\tWs.__instance = this;\n\t}\n\n\thandleMessage(event) {\n\t\tconst messageText = event.data;\n\t\tconsole.log('got message ', messageText);\n\t\ttry {\n\t\t\tconst message = JSON.parse(messageText);\n\t\t\tbus.emit(message.class, message);\n\t\t} catch (err) {\n\t\t\tconsole.error('smth went wront in handleMessage: ', err);\n\t\t}\n\t}\n\n\tsend(type, payload) {\n\t\tconsole.log('sent message: type - ', type, ' data - ', payload);\n\t\tthis.ws.send(JSON.stringify({\n\t\t\tclass: type,\n\t\t\tpayload: payload\n\t\t}));\n\t}\n}\n\n","var pug = require(\"!../../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (height, id, width) {pug_html = pug_html + \"\\u003Cdiv class=\\\"info-menu\\\"\\u003E\\u003Cdiv class=\\\"about-region\\\" id=\\\"about-region\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"canvas-wrap\\\"\\u003E\\u003Ccanvas\" + (\" class=\\\"canvas\\\"\"+pug.attr(\"width\", width, true, true)+pug.attr(\"height\", height, true, true)+pug.attr(\"id\", id, true, true)) + \"\\u003E\\u003C\\u002Fcanvas\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"chat\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"control-interface\\\"\\u003E\\u003Cdiv class=\\\"change\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";}.call(this,\"height\" in locals_for_with?locals_for_with.height:typeof height!==\"undefined\"?height:undefined,\"id\" in locals_for_with?locals_for_with.id:typeof id!==\"undefined\"?id:undefined,\"width\" in locals_for_with?locals_for_with.width:typeof width!==\"undefined\"?width:undefined));;return pug_html;};\nmodule.exports = template;","/* eslint-disable indent */\nimport Player from './player.js';\nimport bus from '../../bus.js';\nimport getRandom from '../math/getRandom.js';\n\n/**\n * Class representing game Player\n */\nexport default class BotPlayer extends Player {\n\t/**\n\t * Creates Player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color, canvas,  img) {\n\t\tsuper(name, color, canvas,  img);\n\n\t\tthis.listeners();\n\t}\n\n\t/**\n\t * Sets up player's listeners\n\t */\n\tlisteners() {\n\t\tbus.on('bot-move', dict => {\n\t\t\tconst nextPLayer = dict.payload;\n\t\t\tif (nextPLayer.name !== this.name) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// debugger;\n\t\t\tconst attackers = [];\n\t\t\tfor (let i = 0; i < this.regions.length; i++) {\n\n\t\t\t\tif (this.regions[i].neighbour.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tattackers.push(this.regions[i]);\n\t\t\t}\n\t\t\tconst attacker = getRandom(0, attackers.length - 1);\n\t\t\t// debugger;\n\t\t\tbus.emit('bot-attack', {\n\t\t\t\tfrom: attackers[attacker],\n\t\t\t\tto: attackers[attacker].neighbour[getRandom(0, attackers[attacker].neighbour.length - 1)]\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tbus.emit('bot-change-move', 'bot');\n\t\t\t}, 1000);\n\t\t});\n\t}\n}","\n\nexport  const renderScene = (canvas, regions, img) => {\n\tconst ctx = canvas.getContext('2d');\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\tregions.forEach((region) => {\n\t\tregion.renderHex();\n\t});\n};","import Player from './player.js';\nimport PLAYER_STATES from '../config/playerStates.js';\nimport bus from '../../bus.js';\n\n/**\n * Class representing client's player\n */\nexport default class MainPlayer extends Player {\n\t/**\n\t * Creates main player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color, canvas,  img) {\n\t\tsuper(name, color, canvas, img);\n\t\tthis.status = PLAYER_STATES.DEFAULT;\n\t}\n\n\tdelRegion(reg) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i] === reg) {\n\t\t\t\tthis.regions.splice(i,1);\n\t\t\t}\n\t\t}\n\t\tif (this.regions.length === 0) {\n\t\t\tthis.status = PLAYER_STATES.LOSE;\n\t\t\tbus.emit('gameover', {});\n\t\t}\n\t}\n}","import MainPlayer from './player/mainPlayer.js';\nimport BotPlayer from './player/botPlayer.js';\nimport Region from './components/region.js';\nimport GameManager from './gameManager.js';\nimport Controller from './controller.js';\nimport GameScene from './gameScene.js';\nimport bus from '../bus.js';\nimport {GameModes} from './config/modes.js';\nimport Ws from '../ws.js';\nimport User from '../userModel.js';\nimport WebPlayer from './player/webPlayer.js';\n\n/**\n * Class representing game\n */\nexport default class Game {\n\t/**\n\t * Creates game\n\t * @param mode\n\t * @param game_canvas\n\t * @param change_canvas\n\t */\n\tconstructor(mode, game_canvas, coordinate, changeBut, img) {\n\t\t//let GameConstructor = null;\n\n\t\t// if (Game.__instance) {\n\t\t// \treturn Game.__instance;\n\t\t// }\n\t\tthis.listeners = {};\n\t\tGame.__instance = this;\n\n\t\tthis.mode = mode;\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.coordinate = coordinate;\n\t\tthis.game_ctx = this.game_canvas.getContext('2d');\n\t\tthis.img = img;\n\t\tthis.scene = null;\n\t\tthis.controller = new Controller(this.game_canvas, changeBut, this.mode);\n\t\tconsole.log(this.mode);\n\t\tif (this.mode === GameModes.singleplayer) {\n\t\t\tthis.players = [\n\t\t\t\tnew MainPlayer('A', 'rgba(0,255,127,0.4)', this.game_canvas, this.img),\n\t\t\t\tnew BotPlayer('B','rgba(0,0,205,0.4)', this.game_canvas, this.img),\n\t\t\t\tnew BotPlayer('C', 'rgba(255,69,0,0.4)', this.game_canvas, this.img),\n\t\t\t\tnew BotPlayer('D', 'rgba(139,125,107,0.4)', this.game_canvas, this.img),\n\t\t\t\tnew BotPlayer('E', 'rgba(255,165,0,0.4)', this.game_canvas, this.img)\n\t\t\t];\n\t\t\tthis.regions = [];\n\n\t\t\tthis.players.forEach( (player, i, arr) => {\n\t\t\t\tthis.regions.push(new Region(player.name, player,\n\t\t\t\t\tthis.game_canvas, this.coordinate, (arr.length - i) * 1000));\n\t\t\t});\n\t\t\tthis.players.forEach(player => {\n\t\t\t\tplayer.setAllRegtions(this.regions);\n\t\t\t});\n\t\t\tthis.regions.forEach(temp => {\n\t\t\t\ttemp.setGlobalRegions(this.regions);\n\t\t\t});\n\n\t\t\tthis.scene = new GameScene(this.game_canvas, this.players, this.regions, this.mode);\n\n\t\t\tthis.manager = new GameManager(this.controller, this.game_canvas, this.regions, this.img, this.mode);\n\t\t} else {\n\t\t\tthis.Ws = new Ws();\n\t\t\tbus.on('connected', () => {\n\t\t\t\tthis.Ws.send('JoinGame$Request', {});\n\t\t\t\tbus.on('InitGame$Request', (data) => {\n\t\t\t\t\t//TODO установить игроков\n\t\t\t\t\tconst initData = data.payload;\n\t\t\t\t\tconst username = User.getCurUser().username;\n\t\t\t\t\tlet indexPlayer;\n\t\t\t\t\tinitData.players.forEach((player, index) => {\n\t\t\t\t\t\tif (player === username) {\n\t\t\t\t\t\t\tindexPlayer = index + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.players = [];\n\t\t\t\t\tthis.regions = [];\n\t\t\t\t\tthis.botPlayer = new BotPlayer('bot', 'rgba(0,0,205,0.4)', this.game_canvas, this.img);\n\t\t\t\t\tinitData.map.forEach((obj,i) => {\n\t\t\t\t\t\tif (obj.owner === indexPlayer) {\n\t\t\t\t\t\t\tconst player = new MainPlayer(username, 'rgba(0,255,127,0.4)', this.game_canvas, this.img);\n\t\t\t\t\t\t\tthis.players.push(player);\n\t\t\t\t\t\t\tconst region = new Region(username, player, this.game_canvas, this.coordinate, obj.units);\n\t\t\t\t\t\t\tthis.regions.push(region);\n\t\t\t\t\t\t\t// player.addRegion(region);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (obj.owner === 0) {\n\t\t\t\t\t\t\tconst region = new Region(String(i), this.botPlayer, this.game_canvas, this.coordinate, 0);\n\t\t\t\t\t\t\tthis.regions.push(region);\n\t\t\t\t\t\t\t// this.botPlayer.addRegion(region);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tinitData.players.forEach((player, i) => {\n\t\t\t\t\t\t\t\tif (obj.owner === i + 1) {\n\t\t\t\t\t\t\t\t\tconsole.log('in else');\n\t\t\t\t\t\t\t\t\tthis.webPlayer = new WebPlayer(player, 'rgba(255,69,0,0.4)', this.game_canvas, this.img);\n\t\t\t\t\t\t\t\t\tthis.players.push(this.webPlayer);\n\t\t\t\t\t\t\t\t\tconst region = new Region(player, this.webPlayer, this.game_canvas, this.coordinate, obj.units);\n\t\t\t\t\t\t\t\t\tthis.regions.push(region);\n\t\t\t\t\t\t\t\t\t// this.webPlayer.addRegion(region);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.players.forEach(player => {\n\t\t\t\t\t\tplayer.setAllRegtions(this.regions);\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log(username);\n\t\t\t\t\tconsole.log(initData);\n\n\t\t\t\t\tthis.scene = new GameScene(this.game_canvas, this.players, this.regions, this.mode);\n\t\t\t\t\tthis.manager = new GameManager(this.controller, this.game_canvas, this.regions, this.img, this.mode);\n\t\t\t\t\tthis.start();\n\t\t\t\t\t// Ws.send('set-players-confirm', true);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Starts game\n\t */\n\tstart() {\n\t\tthis.controller.start();\n\t\tthis.scene.onListeners();\n\t\tthis.manager.start();\n\t\tbus.emit('start-game', {});\n\t}\n\n\t/**\n\t * turns game off\n\t */\n\tdestroy() {\n\t\tthis.controller.stop();\n\t\tthis.manager.destroy();\n\t}\n\n}\n\n//todo ИНТЕРФЕЙС БЛ*ТЬ\n\n/*\n* JoinGame$Request\n* InitGame$Request\n* ClientTurn$Request\n* lovim\n* InitGame$Request\n* FinishGame\n* ServerTurn\n */\n","import config from '../conf/route.js';\n\n/**\n * Class represents interface for working with HTTP\n */\nclass HttpService {\n\t/**\n     * GET request\n     * @param url\n     * @param  {function} callbackfn\n     * @return {PromiseLike<T> | Promise<T>}\n     */\n\tstatic get(url, callbackfn) {\n\t\treturn this.request('GET', url)\n\t\t\t.then (\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.status === 200) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallbackfn(null, response.json());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\t\tconsole.error('get error: ', err);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbackfn(response, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n     * POST request\n     * @param url\n     * @param body\n     * @param  {function} callbackfn\n     * @return {PromiseLike<T> | Promise<T>}\n     */\n\tstatic post(url, body, callbackfn) {\n\t\treturn this.request('POST', url, body)\n\t\t\t.then (\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.status < 300) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallbackfn(null, response.json());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\t\tconsole.error('post error: ', err);\n\t\t\t\t\t\t\tcallbackfn(err);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbackfn(response);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n     * Generic request\n     * @param requestMethod\n     * @param url\n     * @param body\n     * @return {Promise<Response>}\n     */\n\tstatic request(requestMethod, url, body) {\n\t\tconst headers = new Headers();\n\n\t\tif (requestMethod ==='POST') {\n\t\t\tif (url !== 'users/chava') {\n\t\t\t\theaders.append('Content-Type', 'application/json; charset=utf-8');\n\t\t\t}\n\n\t\t}\n\n\t\tconst req = {\n\t\t\tmethod: requestMethod,\n\t\t\theaders: headers,\n\t\t\tbody: body,\n\t\t\tcredentials: 'include',\n\t\t\tmode: 'cors'\n\t\t};\n\t\t//TODO:: на время\n\t\t// if (url === 'users/chava') {\n\t\t// \treturn fetch('http://localhost:5000/users/chava', req);\n\t\t// }\n\t\treturn fetch(`${config.serverUrl}${url}`, req);\n\t}\n}\n\nexport default HttpService;","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport Game from '../../../modules/game/game.js';\nimport bus from '../../../modules/bus.js';\nimport Coordinate from '../../../modules/game/config/coordinate.js';\nimport {GameModes} from '../../../modules/game/config/modes.js';\nlet generateCanvas = require('./gameTemplate.pug');\n\n/**\n * Class representing Section of the game\n */\nexport default class GameSection extends Section {\n\t/**\n\t * Creates game section\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.parent = document.getElementById('game');\n\t\tthis.wrapper = document.createElement('div');\n\t\tthis.wrapper.classList.add('wrapper');\n\n\t\tthis.wrapper.innerHTML += generateCanvas(\n\t\t\t{\n\t\t\t\t'width': window.innerWidth * 0.7,\n\t\t\t\t'height': window.innerWidth * 0.525 * 0.83,\n\t\t\t\t'id': 'game-canvas'\n\t\t\t}\n\t\t);\n\t\tthis.height_canv = window.innerHeight * 0.83;\n\t\tthis.parent.appendChild(this.wrapper);\n\t\tthis.game_canvas = document.getElementById('game-canvas');\n\t\tthis.ctx = this.game_canvas.getContext('2d');\n\n\t\tthis.game_canvas.style.marginTop = String(100 - 100 * this.game_canvas.height / this.height_canv) / 2 + '%';\n\n\t}\n\t/**\n\t * @return {HTMLDivElement | *}\n\t */\n\trender() {\n\n\t\tthis.img = new Image();\n\t\tthis.img.src = '/map.png';\n\t\tthis.load = new Promise(resolve => {\n\t\t\tthis.img.onload = () => {\n\t\t\t\tresolve(this.ctx.drawImage(this.img, 0,0, this.game_canvas.width, this.game_canvas.height));\n\t\t\t};\n\t\t});\n\t\tthis.load\n\t\t\t.then(\n\t\t\t\t() => {\n\t\t\t\t\tthis.setWindowResizeHandler();\n\t\t\t\t\tthis.coordinate = new Coordinate(this.game_canvas);\n\t\t\t\t\tthis.changeBut = this.wrapper.getElementsByClassName('change')[0];\n\t\t\t\t\tthis.game = new Game(GameModes.singleplayer, this.game_canvas, this.coordinate, this.changeBut, this.img);\n\t\t\t\t\tthis.game.start();\n\t\t\t\t}\n\t\t\t);\n\n\t\tbus.on('gameover', () => {\n\t\t\talert('gameover');\n\t\t\tthis.game.destroy();\n\t\t\thistory.go('/singleplayer');\n\t\t});\n\t\treturn this.wrapper;\n\t}\n\n\n\t/**\n\t * @return {boolean}\n\t */\n\tallowed() {\n\t\t// return User.isAuthorized();\n\t\treturn true;\n\t}\n\n\tcomputeCanvasSize() {\n\t\t// const size = (window.innerWidth > window.innerHeight) ? window.innerHeight : window.innerWidth;\n\t\treturn [window.innerWidth * 0.7, window.innerWidth * 0.525 * 0.83];\n\t}\n\n\tsetWindowResizeHandler() {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tlet beforeResize = {\n\t\t\t\twidth: this.game_canvas.width,\n\t\t\t\theight: this.game_canvas.height\n\t\t\t};\n\t\t\t[this.game_canvas.width, this.game_canvas.height] = this.computeCanvasSize();\n\t\t\tthis.ctx.drawImage(this.img, 0, 0, this.game_canvas.width, this.game_canvas.height);\n\t\t\tthis.coordinate.reSize(this.game_canvas);\n\n\t\t\tthis.game_canvas.style.marginTop = String(100 - 100 * this.game_canvas.height / this.height_canv) / 2 + '%';\n\n\t\t\tbus.emit('resize-for-draw', {});\n\t\t});\n\t\treturn this;\n\t}\n}\n\n\n\n//todo инструкция\n//todo синглплеер ~ треня\n//todo графоний\n\n\n// интерфейс по красоте, установить другой фон\n// реализовать логику выбора юнитов(их кол-во для атаки)\n// анимации\n","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (attrs) {pug_html = pug_html + \"\\u003Cdiv class=\\\"div__menu-wrapper\\\"\\u003E\\u003Cdiv class=\\\"left-top\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"right-top\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"left-bot\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"right-bot\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Ch2\\u003EMENU\\u003Cul\\u003E\";\n// iterate attrs\n;(function(){\n  var $$obj = attrs;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var i = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Cli class=\\\"li__menu\\\"\\u003E\\u003Cdiv class=\\\"div__menu-btn-wrapper\\\"\\u003E\\u003Cdiv class=\\\"planck\\\"\\u003E\\u003Cdiv class=\\\"left\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"right\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"lamp-box\\\"\\u003E\\u003Cdiv class=\\\"red-lamp\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"button\\\"\\u003E\\u003Ca\" + (pug.attr(\"href\", i.href, true, true)) + \"\\u003E\" + (pug.escape(null == (pug_interp = i.title) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fli\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var i = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Cli class=\\\"li__menu\\\"\\u003E\\u003Cdiv class=\\\"div__menu-btn-wrapper\\\"\\u003E\\u003Cdiv class=\\\"planck\\\"\\u003E\\u003Cdiv class=\\\"left\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"right\\\"\\u003E\\u003Cdiv class=\\\"screw\\\"\\u003E\\u003Cdiv class=\\\"screw_bottom\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"lamp-box\\\"\\u003E\\u003Cdiv class=\\\"red-lamp\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"button\\\"\\u003E\\u003Ca\" + (pug.attr(\"href\", i.href, true, true)) + \"\\u003E\" + (pug.escape(null == (pug_interp = i.title) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fli\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ful\\u003E\\u003C\\u002Fh2\\u003E\\u003C\\u002Fdiv\\u003E\";}.call(this,\"attrs\" in locals_for_with?locals_for_with.attrs:typeof attrs!==\"undefined\"?attrs:undefined));;return pug_html;};\nmodule.exports = template;","import Section from '../baseView.js';\nimport bus from '../../../modules/bus.js';\nimport Router from '../../../modules/router.js';\nimport User from '../../../modules/userModel.js';\nlet generateMenu = require('./menu.pug');\n\n/**\n * Class represents Section with Menu buttons\n */\nexport default class MenuSection extends Section {\n\t/**\n     * Creates generic section\n     */\n\tconstructor(){\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns MenuSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.menu = document.createElement('div');\n\t\tthis.attrsActive = [\n\t\t\t{\n\t\t\t\ttitle: 'singleplayer',\n\t\t\t\thref: '/singleplayer'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'multiplayer',\n\t\t\t\thref: '/multiplayer'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'profile',\n\t\t\t\thref: '/profile'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'rating',\n\t\t\t\thref: '/rating'\n\t\t\t},\n\t\t];\n\t\tthis.attrPassive = [\n\t\t\t{\n\t\t\t\ttitle: 'singleplayer',\n\t\t\t\thref: '/singleplayer'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Sign In',\n\t\t\t\thref: '/login'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Sign Up',\n\t\t\t\thref: '/register'\n\t\t\t},\n\t\t];\n\n\t\tif (User.isAuthorized()) {\n\t\t\tthis.menu.innerHTML = generateMenu({'attrs': this.attrsActive});\n\t\t\tthis.logout = document.createElement('a');\n\t\t\tthis.logout.setAttribute('href', '/');\n\t\t\tthis.logout.innerText = 'logout';\n\t\t\tthis.logout.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tbus.emit('logout', null);\n\t\t\t});\n\t\t\tthis.logoutWrapper = document.createElement('div');\n\t\t\tthis.logoutWrapper.classList.add('button');\n\t\t\tthis.logoutWrapper.appendChild(this.logout);\n\t\t\tthis.menu.appendChild(this.logoutWrapper);\n\t\t}\n\t\telse {\n\t\t\tthis.menu.innerHTML = generateMenu({'attrs': this.attrPassive});\n\t\t}\n\t\treturn this.menu;\n\t}\n\n\tallowed() {\n\t\treturn true;\n\t}\n\n\tsign() {\n\t\tbus.on('user:authorized', (() => {\n\t\t\tthis.allow = true;\n\t\t\tnew Router().open('/menu');\n\t\t}));\n\n\t\tbus.on('user:unauthorized', (() => {\n\t\t\tthis.allow = false;\n\t\t}));\n\n\t\tbus.on('menu:hide', (() => {\n\t\t\tthis.hide();\n\t\t}));\n\t}\n\n\thide() {\n\t\tthis.menu.setAttribute('hidden', 'hidden');\n\t}\n}\n","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;pug_html = pug_html + \"\\u003Cdiv class=\\\"form-wrapper\\\"\\u003E\\u003Ch2\\u003ESign In\\u003C\\u002Fh2\\u003E\\u003Cdiv class=\\\"button\\\"\\u003E\\u003Ca href=\\\"\\u002F\\\"\\u003EBack to menu\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";;return pug_html;};\nmodule.exports = template;","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n\n\n/**\n * Class representing Login Form\n */\nexport default class LoginForm extends Form {\n\t/**\n     * Creates generic form\n     */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n     * Return input data of the form\n     * @return {{name: null, email: string, password: string}}\n     */\n\tgetData() {\n\t\tconst email = this.Email.getData();\n\t\tconst password = this.Password.getData();\n\t\tif (email === '' || password === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\temail: email,\n\t\t\tpassword: password\n\t\t};\n\t}\n\n\t/**\n     * Renders and returns form DOM element\n     * @return {*}\n     */\n\trender() {\n\t\tthis.Email = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'email',\n\t\t\tid: 'loginEmail'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'password',\n\t\t\tid: 'loginPassword'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Sign In',\n\t\t\tid: 'loginSubmit'\n\t\t});\n\n\t\tthis.Email.setOnInputChange(() => {\n\t\t\tValidator.checkMail(this.Email);\n\t\t});\n\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\n\n\t\tthis.formElement.appendChild(this.Email.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\t\treturn this.formElement;\n\t}\n\n\t/**\n     * Defines behaviour on submit\n     * @param {function} callbackfn – submit handler\n     */\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n\n}\n","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport LoginForm from '../../forms/loginForm.js';\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\nlet generateLogin = require('./login.pug');\n\n/** Class represents section with Login Form */\nexport default class LoginSection extends Section {\n\t/**\n     * Creates generic section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns LoginSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\n\t\tthis.login = document.createElement('div');\n\t\tthis.login.innerHTML = generateLogin();\n\t\tthis.after = this.login.getElementsByClassName('button')[0];\n\n\t\tthis.loginForm = new LoginForm();\n\n\t\tthis.login.firstChild.insertBefore(this.loginForm.render(), this.after);\n\n\n\t\tthis.loginForm.setOnSubmit(() => {\n\t\t\tconst userData = this.loginForm.getData();\n\t\t\tif (userData === null) {\n\t\t\t\tthis.loginForm.Email.setError('empty fields');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tconsole.log(jsonUserData);\n\t\t\tbus.emit('user:login', jsonUserData);\n\t\t});\n\t\treturn this.login;\n\t}\n\n\tallowed() {\n\t\treturn !User.isAuthorized();\n\t}\n\n\tsign() {\n\t\tbus.on('login-error', (error) => {\n\t\t\tthis.loginForm.Email.setError(error.payload);\n\t\t});\n\t}\n}\n","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (Object, data, page, pages, user) {pug_html = pug_html + \"\\u003Ctable class=\\\"scorboard_table\\\"\\u003E\\u003Cthead\\u003E\\u003Ctr\\u003E\\u003Ctd\\u003ENickname\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003EScore\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\\u003C\\u002Fthead\\u003E\\u003Ctbody\\u003E\";\n// iterate data\n;(function(){\n  var $$obj = data;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var fuck = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Ctr class=\\\"scorboard_row\\\"\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.keys(fuck)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.values(fuck)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var fuck = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Ctr class=\\\"scorboard_row\\\"\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.keys(fuck)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.values(fuck)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003Ctr\\u003E\\u003Ctd\\u003E⋮\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\\u003Ctr class=\\\"scorboard_row\\\"\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.keys(user)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = Object.values(user)) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\\u003C\\u002Ftbody\\u003E\\u003C\\u002Ftable\\u003E\\u003Cbr\\u003E\\u003Cdiv class=\\\"scorboard_pages\\\"\\u003E\\u003Cp\\u003EPage \" + (pug.escape(null == (pug_interp = page) ? \"\" : pug_interp)) + \" of \" + (pug.escape(null == (pug_interp = Object.values(pages)) ? \"\" : pug_interp)) + \"\\u003C\\u002Fp\\u003E\\u003C\\u002Fdiv\\u003E\\u003C!--div.pagination#pagination--\\u003E\\u003C!--    a#prevBut(href=\\\"#\\\") \\u003C--\\u003E\\u003C!--    a#nextBut(href=\\\"#\\\") \\u003E--\\u003E\\u003C!----\\u003E\";}.call(this,\"Object\" in locals_for_with?locals_for_with.Object:typeof Object!==\"undefined\"?Object:undefined,\"data\" in locals_for_with?locals_for_with.data:typeof data!==\"undefined\"?data:undefined,\"page\" in locals_for_with?locals_for_with.page:typeof page!==\"undefined\"?page:undefined,\"pages\" in locals_for_with?locals_for_with.pages:typeof pages!==\"undefined\"?pages:undefined,\"user\" in locals_for_with?locals_for_with.user:typeof user!==\"undefined\"?user:undefined));;return pug_html;};\nmodule.exports = template;","import http from './http.js';\nimport route from '../conf/route.js';\nimport bus from './bus.js';\nimport Router from './router.js';\nimport User from './userModel.js';\n// error transformer\n\n/**\n * Class represents set of tools to work with User data\n */\nclass UserController {\n\t/**\n     * Creates user and loads user data\n     */\n\tconstructor() {\n\t\tif (UserController.__instance) {\n\t\t\treturn UserController.__instance;\n\t\t}\n\t\tbus.on('user:signup', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.signUp(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t})\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('signup-error', error);\n\t\t\t\t\t});\n\n\t\t});\n\t\tbus.on('logout', () => {\n\t\t\tUser.logout()\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('logout-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\n\t\tbus.on('user:login', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.signIn(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('login-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t\tbus.on('user:update', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.update(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('update-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t\tbus.on('user:avatarUpload', (data) => {\n\t\t\tconst avatar = data.payload;\n\t\t\tconsole.log(avatar);\n\t\t\tUser.uploadAvatar(avatar)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/profile');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t});\n\n\n\t\tUserController.__instance = this;\n\t}\n\n\n\t/**\n     * Loads Rating of all Users\n     * @param page\n     * @param {function} callbackfn\n     * @return {PromiseLike<T>|Promise<T>}\n     */\n\trating(page, callbackfn) {\n\t\treturn http.get(route.userAPIMethods.leaderBoard + '/' + page.toString(), callbackfn);\n\t}\n\n}\nconst userController = new UserController();\nexport default userController;","'use strict';\nimport Section from '../baseView.js';\nimport UserController from '../../../modules/userController.js';\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\nlet generateRating = require('./rating.pug');\n\n/**\n * Class represents Section with Rating Table\n */\nexport default class RatingSection extends Section {\n\t/**\n     * Creates generic Section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.page = 1;\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns RaringSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.rating = document.createElement('div');\n\t\tthis.rating.innerHTML = '';\n\n\t\tthis.paginationWrap = document.createElement('div');\n\t\tthis.paginationWrap.classList.add('pagination');\n\n\t\tthis.prevButt = document.createElement('a');\n\t\tthis.prevButt.innerText = '<';\n\t\tthis.prevButt.addEventListener('click', event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.rating.removeChild(this.rating.firstChild);\n\t\t\tthis.page--;\n\t\t\tthis.prevButt.hidden = this.page === 1;\n\t\t\tthis.nextButt.hidden = false;\n\t\t\tthis.load(this.page);\n\t\t});\n\t\tthis.nextButt = document.createElement('a');\n\n\n\t\tthis.nextButt.innerText = '>';\n\t\tthis.nextButt.addEventListener('click', event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.rating.removeChild(this.rating.firstChild);\n\t\t\tthis.page++;\n\t\t\tif (this.page !== 1) {\n\t\t\t\tthis.prevButt.hidden = false;\n\t\t\t}\n\t\t\tthis.load(this.page, (empty) => {\n\t\t\t\tif (empty) {\n\t\t\t\t\tthis.nextButt.hidden = true;\n\t\t\t\t\tthis.lastPage = document.createElement('div');\n\t\t\t\t\tthis.lastPage.innerText = 'This is the last page';\n\t\t\t\t\tthis.rating.insertBefore(this.lastPage, this.rating.firstChild);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.prevButt.hidden = this.page === 1;\n\n\t\tthis.paginationWrap.appendChild(this.prevButt);\n\t\tthis.paginationWrap.appendChild(this.nextButt);\n\n\t\tthis.backButtWrap = document.createElement('div');\n\t\tthis.backButtWrap.classList.add('button');\n\t\tthis.backButtWrap.classList.add('back-button');\n\n\t\tthis.backButt = document.createElement('a');\n\t\tthis.backButt.setAttribute('href', '/');\n\t\tthis.backButt.innerText = 'Back to menu';\n\t\tthis.backButtWrap.appendChild(this.backButt);\n\n\t\tthis.load(1, ()=>{});\n\t\tthis.rating.appendChild(this.paginationWrap);\n\t\tthis.rating.appendChild(this.backButtWrap);\n\t\treturn this.rating;\n\t}\n\n\tload(page, callbackfn) {\n\t\tconsole.log(page);\n\n\t\tUserController.rating( page, (err, users) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tcallbackfn(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(err, users);\n\n\t\t\tusers.then(\n\t\t\t\tdata => {\n\t\t\t\t\tthis.table = document.createElement('div');\n\t\t\t\t\tthis.table.innerHTML = generateRating({'data': data[0], 'user': data[1][0],\n\t\t\t\t\t'pages': data[2][0], 'page': page});\n\t\t\t\t\tthis.rating.insertBefore(this.table, this.rating.firstChild);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tsign() {\n\t\tbus.on('user:authorized', ((data) => {\n\t\t\tthis.allowed = true;\n\t\t}));\n\n\t\tbus.on('user:unauthorized', ((data) => {\n\t\t\tthis.allowed = false;\n\t\t}));\n\t}\n\n\tallowed() {\n\t\treturn User.isAuthorized();\n\t}\n}","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (user) {pug_html = pug_html + \"\\u003Cdiv class=\\\"div__avatar-wrapper\\\"\\u003E\\u003Cimg class=\\\"avatar\\\" src=\\\"default.jpg\\\" id=\\\"avatar\\\"\\u003E\\u003Ctable class=\\\"table__profile\\\"\\u003E\\u003Ctr class=\\\"tr__profile\\\"\\u003E\\u003Ctd\\u003EEmail:\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = user.email) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\\u003Ctr class=\\\"tr__profile\\\"\\u003E\\u003Ctd\\u003ERating:\\u003C\\u002Ftd\\u003E\\u003Ctd\\u003E\" + (pug.escape(null == (pug_interp = user.rating) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\\u003C\\u002Ftr\\u003E\\u003C\\u002Ftable\\u003E\\u003C\\u002Fdiv\\u003E\";}.call(this,\"user\" in locals_for_with?locals_for_with.user:typeof user!==\"undefined\"?user:undefined));;return pug_html;};\nmodule.exports = template;","import Form from '../form.js';\nimport Input from '../../blocks/input/input.js';\n\n/**\n * Class representing Load form\n */\nexport default class LoadForm extends Form {\n\t/**\n\t * creates loadForm\n\t * @param type\n\t */\n\tconstructor(type) {\n\t\tsuper();\n\t}\n\n\t/**\n\t * returns data of loadForm\n\t * @return {*}\n\t */\n\tgetData() {\n\t\tconst avatar = this.UploadInput.getFormData();\n\t\tif (avatar === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tavatar: avatar\n\t\t};\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\t\tthis.UploadInput = new Input({\n\t\t\ttype: 'file',\n\t\t\tplaceholder: '',\n\t\t\tid: 'loadImageInput'\n\t\t});\n\t\tthis.UploadSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Save picture',\n\t\t\tid: 'loadImageSubmit'\n\t\t});\n\n\t\tthis.formElement.appendChild(this.UploadInput.render());\n\t\tthis.formElement.appendChild(this.UploadSubmit.render());\n\n\t\tthis.formElement.setAttribute('enctype', 'multipart/form-data');\n\t\tthis.formElement.setAttribute('name', 'form_loadFile');\n\t\tthis.formElement.classList.add('form-loadFile');\n\n\t\treturn this.formElement;\n\t}\n\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","/**\n * Removes children of the root element and puts new child into it\n * @param {HTMLDivElement} child\n * @param {HTMLDivElement} root\n */\nexport default function renderDOM(child, root) {\n\twhile (root.firstChild) {\n\t\troot.removeChild(root.firstChild);\n\t}\n\troot.appendChild(child);\n}","import renderDOM from '../components/render/render.js';\n\n/**\n * Class represents set of tools for switching sections\n */\nclass SectionSwitcher {\n\tconstructor() {}\n\n\t/**\n     * Switches sections\n     * @param newSection\n     * @param rootForElement\n     */\n\tchangeSection(newSection, rootForElement) {\n\t\trenderDOM(newSection, rootForElement);\n\t}\n}\n\nconst sectionSwitcher = new SectionSwitcher();\n\nexport {sectionSwitcher};\n\nexport default SectionSwitcher;\n\n\n","import Block from './block.js';\n/** Class representing button */\nexport default class Button extends Block {\n    /**\n    * Create a button\n    * @param {string} type   - type of the button\n    * @param {string} value  - inner text\n    * @param {string} parent - parent element\n    */\n\tconstructor(type, value, parent) {\n\t\tsuper();\n\t\tthis.buttonWrapper = document.createElement('div');\n\t\tthis.buttonElement = document.createElement('button');\n\t\tthis.buttonElement.classList.add('btn-style');\n\t\tthis.buttonElement.classList.add('button');\n\t\tthis.buttonElement.innerHTML = value;\n\t\tthis.buttonElement.type = type;\n\n\t\tif (parent) {\n\t\t\tparent.appendChild(this.buttonWrapper);\n\t\t}\n\t\tthis.buttonWrapper.classList.add('page-button');\n\n\t\tthis.buttonWrapper.appendChild(this.buttonElement);\n\t}\n\n\t/**\n     * Get the button DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\treturn this.buttonWrapper;\n\t}\n\n\t/**\n     * To make a button hidden\n     */\n\thide() {\n\t\tthis.buttonWrapper.classList.add('hidden');\n\t}\n\n\t/**\n     * To make button visible\n     */\n\tshow() {\n\t\tthis.buttonWrapper.classList.remove('hidden');\n\t}\n\n\t/**\n     * Defines behaviour on click\n     * @param {function} callbackfn - button click handler\n     */\n\tsetOnClick(callbackfn) {\n\t\tthis.buttonElement.addEventListener('click',  event => {\n\t\t\tevent.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}\n","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n\n/**\n * Class representing form to change user data\n */\nexport default class ChangeForm extends Form {\n\t/**\n\t * creates ChangeForm\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * returns data of the form\n\t * @return {{oldp: string, newp: string}}\n\t */\n\tgetData() {\n\t\treturn {\n\t\t\toldp: this.OldPassword.getData(),\n\t\t\tnewp: this.Password.getData()\n\t\t};\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\n\t\tthis.OldPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'old password',\n\t\t\tid: 'changeOld'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'new password',\n\t\t\tid: 'changeNew'\n\t\t});\n\n\t\tthis.RepeatPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'repeat password',\n\t\t\tid: 'changeRepeat'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Save',\n\t\t\tid: 'changeSubmit'\n\t\t});\n\n\t\t//TODO:: бэк\n\t\tthis.OldPassword.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.OldPassword);\n\t\t});\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\t\tthis.RepeatPassword.setOnInputChange(() => {\n\t\t\tValidator.checkConfirm(this.Password, this.RepeatPassword);\n\t\t});\n\n\t\tthis.formElement.appendChild(this.OldPassword.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.RepeatPassword.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\n\t\treturn this.formElement;\n\t}\n\n\t/**\n\t * Sets submit listener\n\t * @param callbackfn\n\t */\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","import Section from '../baseView.js';\nimport ChangeForm from '../../forms/changeForm.js';\nimport Button from '../../blocks/button.js';\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\nimport Router from '../../../modules/router.js';\nimport LoadForm from '../../forms/loadPictureForm/loadPictureForm.js';\nlet generateProfile = require('./profile.pug');\n\n/**\n * Class represents Section with Profile data and Form\n */\nexport default class ProfileSection extends Section {\n\t/**\n     * Creates generic Section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns ProfileSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.profileElement = document.createElement('div');\n\t\tthis.profileElement.classList.add('div__profile-wrapper');\n\n\t\tthis.attrs = User.getCurUser();\n\t\tthis.profileTable = document.createElement('div');\n\t\tthis.profileTable.innerHTML = generateProfile({'user': this.attrs});\n\t\tthis.profileElement.appendChild(this.profileTable);\n\t\tthis.profileElement.appendChild(document.createElement('hr'));\n\n\t\tthis.fileForm = new LoadForm();\n\t\tthis.profileElement.appendChild(this.fileForm.render());\n\n\t\tthis.changeForm = new ChangeForm();\n\t\tthis.profileElement.appendChild(this.changeForm.render());\n\n\t\tthis.backButt = new Button('button', 'Back', this.profileElement);\n\t\tthis.backButt.setOnClick(() => {\n\t\t\tnew Router().open('/');\n\t\t});\n\n\t\tthis.changeForm.setOnSubmit( () => {\n\t\t\tconst userData = this.changeForm.getData();\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tbus.emit('user:update', jsonUserData);\n\t\t});\n\t\tthis.fileForm.setOnSubmit( () => {\n\t\t\t//TODO:\n\t\t\tconst file = document.getElementById('loadImageInput');\n\t\t\tconst formData = new FormData();\n\t\t\tconst upload = file.files[0];\n\n\t\t\tformData.append('image', upload);\n\n\t\t\tbus.emit('user:avatarUpload', formData);\n\t\t});\n\t\treturn this.profileElement;\n\t}\n\n\tallowed() {\n\t\treturn User.isAuthorized();\n\t}\n\n\tsign() {\n\t\tbus.on('update:error', data => {\n\t\t\tthis.changeForm.Email.setError(data.payload);\n\t\t});\n\t}\n}","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;pug_html = pug_html + \"\\u003Cdiv class=\\\"form-wrapper\\\" id=\\\"registerSection\\\"\\u003E\\u003Ch2\\u003ESign Up\\u003C\\u002Fh2\\u003E\\u003Cdiv class=\\\"button\\\"\\u003E\\u003Ca href=\\\"\\u002F\\\"\\u003EBack to menu\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";;return pug_html;};\nmodule.exports = template;","var pug = require(\"!../../../../../node_modules/pug-runtime/index.js\");\n\nfunction template(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;var locals_for_with = (locals || {});(function (CLASS, error_id, id, placeholder, type, value) {pug_html = pug_html + \"\\u003Cinput\" + (pug.attr(\"class\", pug.classes([CLASS], [true]), false, true)+pug.attr(\"type\", type, true, true)+pug.attr(\"placeholder\", placeholder, true, true)+pug.attr(\"value\", value, true, true)+pug.attr(\"id\", id, true, true)) + \"\\u003E\\u003Cdiv\" + (\" class=\\\"error input__error\\\"\"+pug.attr(\"id\", error_id, true, true)) + \"\\u003E\\u003C\\u002Fdiv\\u003E\";}.call(this,\"CLASS\" in locals_for_with?locals_for_with.CLASS:typeof CLASS!==\"undefined\"?CLASS:undefined,\"error_id\" in locals_for_with?locals_for_with.error_id:typeof error_id!==\"undefined\"?error_id:undefined,\"id\" in locals_for_with?locals_for_with.id:typeof id!==\"undefined\"?id:undefined,\"placeholder\" in locals_for_with?locals_for_with.placeholder:typeof placeholder!==\"undefined\"?placeholder:undefined,\"type\" in locals_for_with?locals_for_with.type:typeof type!==\"undefined\"?type:undefined,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return pug_html;};\nmodule.exports = template;","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n// validator\n// и какие-то глобальные переменные\n/**\n * Class representing registration form\n */\nexport default class RegisterForm extends Form {\n\t/**\n\t * creates RegisterForm\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\t\tthis.Email = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'email',\n\t\t\tid: 'registerEmail'\n\t\t});\n\n\t\tthis.Name = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'name',\n\t\t\tid: 'registerName'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'password',\n\t\t\tid: 'registerPass'\n\t\t});\n\n\t\tthis.ConfirmPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'confirm password',\n\t\t\tid: 'registerPass2'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Sign Up',\n\t\t\tid: 'registerSubmit'\n\t\t});\n\n\n\t\tthis.Email.setOnInputChange(() => {\n\t\t\tValidator.checkMail(this.Email);\n\t\t});\n\t\tthis.Name.setOnInputChange(() => {\n\t\t\tValidator.checkName(this.Name);\n\t\t});\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\t\tthis.ConfirmPassword.setOnInputChange(() => {\n\t\t\tValidator.checkConfirm(this.Password, this.ConfirmPassword);\n\t\t});\n\n\t\tthis.formElement.appendChild(this.Email.render());\n\t\tthis.formElement.appendChild(this.Name.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.ConfirmPassword.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\t\treturn this.formElement;\n\t}\n\n\tgetData() {\n\t\tconst name = this.Name.getData();\n\t\tconst email = this.Email.getData();\n\t\tconst password = this.Password.getData();\n\t\tif (name === '' || email === '' || password === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tusername: name,\n\t\t\temail: email,\n\t\t\tpassword: password\n\t\t};\n\t}\n\n\n\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}\n","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport RegisterForm from '../../forms/registerForm.js';\n\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\nlet generateRegister = require('./register.pug');\n\n\n\n/**\n * Class represents Section with Registration Form\n */\nexport default class RegisterSection extends Section {\n\t/**\n     * Creates generic Section and wraps into Parent element\n     * @param parent\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tUser.isAuthorized();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns RegisterSection DOM element\n     * @return {HTMLDivElement}\n     */\n\trender() {\n\t\tthis.register = document.createElement('div');\n\t\tthis.register.innerHTML = generateRegister();\n\t\tthis.registerForm = new RegisterForm();\n\t\tthis.after = this.register.getElementsByClassName('button')[0];\n\t\tthis.register.firstChild.insertBefore(this.registerForm.render(), this.after);\n\t\tthis.registerForm.setOnSubmit( () => {\n\n\t\t\tconst userData = this.registerForm.getData();\n\t\t\tconsole.log(userData);\n\t\t\tif (userData === null) {\n\t\t\t\tthis.registerForm.Email.setError('Empty fields');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tbus.emit('user:signup', jsonUserData);\n\t\t\tbus.on('signup-error', (error) => {\n\t\t\t\tthis.registerForm.Email.setError(error.payload);\n\t\t\t});\n\n\t\t});\n\t\treturn this.register;\n\t}\n\n\tallowed() {\n\t\treturn !User.isAuthorized();\n\t}\n\n\tsign() {\n\n\t\tbus.on('signup-error', (error) => {\n\t\t\tthis.registerForm.Email.setError(error.payload);\n\t\t});\n\n\t}\n}\n","import Player from './player.js';\n\n/**\n * Class representing web player\n */\nexport default class WebPlayer extends Player {\n\t/**\n\t * creates web player\n\t */\n\tconstructor(name, color, canvas,  img) {\n\t\tsuper(name, color, canvas,  img);\n\t\tthis.listeners();\n\t}\n\n\tlisteners() {\n\n\t}\n}","\n\nexport const aboutRegion = (curRegion, domElem) => {\n\tdomElem.innerText = '';\n\tdomElem.innerText += 'name: ';\n\tdomElem.innerText += curRegion.name;\n\tdomElem.innerText += ' \\n';\n\tdomElem.innerText += 'region: ';\n\tdomElem.innerText += curRegion.gameData.units;\n};\n","/* eslint-disable no-undef */\n\n/**\n * Answers if the point is in Hexagon\n * @param x\n * @param y\n * @param xp\n * @param yp\n * @return {boolean}\n */\nconst inHex = (x, y, xp, yp) => {\n\tlet npol = xp.length;\n\tlet j = npol - 1;\n\tlet c = false;\n\tfor (let i = 0; i < npol; i++){\n\t\tif ((((yp[i]<=y) && (y<yp[j])) || ((yp[j]<=y) && (y<yp[i]))) &&\n\t\t\t(x > (xp[j] - xp[i]) * (y - yp[i]) / (yp[j] - yp[i]) + xp[i])) {\n\t\t\tc = !c;\n\t\t}\n\t\tj = i;\n\t}\n\treturn c;\n};\n\nexport default inHex;","/* eslint-disable indent,no-case-declarations,no-console */\nimport inHex from './math/inHex.js';\nimport bus from '../bus.js';\nimport PLAYER_STATES from './config/playerStates.js';\nimport {aboutRegion} from './helperFuncs/renderInfoAboutRegion.js';\nimport Ws from '../ws.js';\nimport {GameModes} from './config/modes.js';\n\n/**\n * Class representing Game Scene (Set of graphical and logical elements)\n */\nexport default class GameScene {\n\t/**\n\t * Creates scene\n\t * @param canvas\n\t * @param players\n\t * @param regions\n\t * @param switcher\n\t * @param mode\n\t */\n\tconstructor(canvas, players, regions, mode) {\n\t\tthis.mode = mode;\n\t\tthis.canvas  = canvas;\n\t\tthis.game_ctx = canvas.getContext('2d');\n\t\tthis.players = players;\n\t\tthis.regions = regions;\n\t\tthis.about_region = document.getElementById('about-region');\n\t\tconsole.log(this.players);\n\t\tthis.setPlayersRegions();\n\t\tif (mode === GameModes.multiplayer) {\n\t\t\tthis.ws = new Ws();\n\t\t}\n\t}\n\n\t/**\n\t * Returns current player\n\t * @return {*}\n\t */\n\tcurrentPlayer() {\n\t\tfor (let i = 0; i < this.players.length; ++i) {\n\t\t\t// TODO проверить работает ли это условие\n\t\t\tif (this.players[i].status !== PLAYER_STATES.DISABLED ) {\n\t\t\t\treturn this.players[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns next player\n\t * @return {*}\n\t */\n\tnextPlayer() {\n\t\tconst curP = this.currentPlayer();\n\t\tfor (let i = 0; i < this.players.length; ++i) {\n\t\t\tif (this.players[i] === curP) {\n\t\t\t\ti = (i + 1) % this.players.length;\n\t\t\t\treturn this.players[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns pointed region\n\t * @param x\n\t * @param y\n\t * @return {Region | null}\n\t */\n\tisRegion(x, y) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (inHex(x, y, this.regions[i].area.xp, this.regions[i].area.yp)) {\n\t\t\t\treturn this.regions[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t *\n\t * @param active\n\t * @param current\n\t * @return {boolean}\n\t */\n\tisNeighbour(active, current) {\n\t\tfor (let i = 0; i < active.neighbour.length; i++) {\n\t\t\tif (current.label === active.neighbour[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t *\n\t * @return {Region}\n\t */\n\tactiveRegion() {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i].selected === true) {\n\t\t\t\treturn this.regions[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tdeactivatePlayers() {\n\t\tthis.players.forEach(player => player.active = false);\n\t}\n\n\t/**\n\t * Sets regions for playes\n\t */\n\tsetPlayersRegions() {\n\t\t//todo шняга полная, надо переделать по-хорошему\n\t\tfor (let i = 0; i < this.players.length; i++ ) {\n\t\t\tthis.players[i].addRegion(this.regions[i]);\n\t\t}\n\t}\n\n\n\n\t/**\n\t * подписываемся на события кликов мышки\n\t */\n\tonListeners() {\n\t\tif (this.mode === GameModes.singleplayer) {\n\t\t\tbus.on('left-click', data => {\n\t\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\t\tconst coordinates = data.payload;\n\t\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\t\t\t\tif (!curRegion) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tswitch (curPlayer.status) {\n\t\t\t\t\tcase PLAYER_STATES.DEFAULT:\n\t\t\t\t\t\tif (!curPlayer.isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurPlayer.status = PLAYER_STATES.READY;\n\n\t\t\t\t\t\t//выводим информацию о регионе\n\t\t\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t\t\t\tbus.emit('select-region', curRegion);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PLAYER_STATES.READY:\n\t\t\t\t\t\tif (!this.currentPlayer().isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//если нажали на выделенный регион\n\t\t\t\t\t\tif (curRegion === this.activeRegion()) {\n\t\t\t\t\t\t\tcurPlayer.status = PLAYER_STATES.DEFAULT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//выводим информацию о регионе\n\t\t\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t\t\t\tbus.emit('change-selection',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactive: this.activeRegion(),\n\t\t\t\t\t\t\t\tnew: curRegion\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbus.on('contextmenu', data => {\n\n\t\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\t\tconst activeRegion = this.activeRegion();\n\t\t\t\tconst coordinates = data.payload;\n\t\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED || curPlayer.status !== PLAYER_STATES.READY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\t\t\t\tif (!curRegion) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\t//если не является регионом игрока\n\t\t\t\tif (!curPlayer.isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\t//если не является соседом, то выходим\n\t\t\t\t\tif (this.isNeighbour(activeRegion, curRegion) === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbus.emit('attack', {\n\t\t\t\t\t\tfrom: this.activeRegion(),\n\t\t\t\t\t\tto: curRegion\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//перемещаем юнитов между своими регионами\n\t\t\t\t\tcurRegion.gameData.units += activeRegion.gameData.units;\n\t\t\t\t\tactiveRegion.gameData.units = 0;\n\t\t\t\t\tbus.emit('move-units',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactive: this.activeRegion(),\n\t\t\t\t\t\t\tnew: curRegion\n\t\t\t\t\t\t});\n\t\t\t\t\t//выводим информацию о регионе\n\t\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbus.on('left-click-change', () => {\n\t\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\t\tconst nextPlayer = this.nextPlayer();\n\t\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbus.emit('change-move', {\n\t\t\t\t\tcurrent: curPlayer,\n\t\t\t\t\tnext: nextPlayer,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tbus.on('bot-attack', data => {\n\t\t\t\tconst regs = data.payload;\n\t\t\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\t\t\tif (regs.to === this.regions[i].label) {\n\t\t\t\t\t\tconsole.log(regs.from.owner, '     ---------');\n\t\t\t\t\t\tbus.emit('attack', {\n\t\t\t\t\t\t\tfrom: regs.from,\n\t\t\t\t\t\t\tto: this.regions[i]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbus.on('bot-change-move', () => {\n\t\t\t\tbus.emit('change-move', {\n\t\t\t\t\tcurrent: this.currentPlayer(),\n\t\t\t\t\tnext: this.nextPlayer(),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tbus.on('delete-from-queue', data => {\n\t\t\t\tconst player = data.payload;\n\t\t\t\t// console.log(this.players, '  b ');\n\t\t\t\tthis.players.forEach((cur, i) => {\n\t\t\t\t\tif (cur === player) {\n\t\t\t\t\t\tthis.players.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// console.log(this.players, ' a');\n\t\t\t});\n\n\t\t\tbus.on('start-game', () => {\n\t\t\t\t//подсветка текущего игрока\n\t\t\t\tbus.emit('illum-cur', this.currentPlayer());\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tbus.on('left-click', data => {\n\t\t\t\tconst coordinates = data.payload;\n\t\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\n\t\t\t\tif (!curRegion) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.players.isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taboutRegion(curRegion, this.about_region);\n\n\t\t\t\tswitch (this.players.status) {\n\t\t\t\t\tcase PLAYER_STATES.DEFAULT:\n\t\t\t\t\t\tthis.players.status = PLAYER_STATES.READY;\n\t\t\t\t\t\tbus.emit('select-region', curRegion);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PLAYER_STATES.READY:\n\t\t\t\t\t\tif (curRegion === this.activeRegion()) {\n\t\t\t\t\t\t\tthis.players.status = PLAYER_STATES.DEFAULT;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbus.emit('change-selection',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactive: this.activeRegion(),\n\t\t\t\t\t\t\t\tnew: curRegion\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbus.on('contextmenu', data => {\n\t\t\t\tconst activeRegion = this.activeRegion();\n\t\t\t\tconst coordinates = data.payload;\n\t\t\t\tif (this.players.status === PLAYER_STATES.DISABLED || this.players.status !== PLAYER_STATES.READY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\t\t\t\tif (!curRegion) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//если не является соседом, то выходим\n\t\t\t\tif (this.isNeighbour(activeRegion, curRegion) === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnew Ws().send('from-to', {\n\t\t\t\t\tfrom: this.activeRegion(),\n\t\t\t\t\tto: curRegion\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tbus.on('left-click-change', () => {\n\t\t\t\t// new Ws().send('change-move', {});\n\t\t\t\tbus.on('ws-change-move-confirm', (data) => {\n\t\t\t\t\t//TODO получить следующего игрока\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tbus.emit('change-move', {});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tbus.on('start-game', (data) => {\n\t\t\t\t//TODO получить текущего игрока и заэмитить его\n\t\t\t\tconsole.log(data);\n\t\t\t\t// bus.emit('illum-cur',{});\n\t\t\t});\n\t\t}\n\t}\n}\n","\nimport bus from '../bus.js';\n\n/**\n * Class representing set of game controls\n */\nexport default class Controller {\n\t/**\n\t * Creates controllers\n\t * @param game_canvas\n\t * @param change_canvas\n\t */\n\tconstructor(game_canvas, changeBut, mode) {\n\t\tthis.mode = mode;\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.changeBut = changeBut;\n\t\t// this.change_canvas = change_canvas;\n\t\t// this.change_canvas.getContext('2d').transform(1,0,0,1, screen.width*0.7, 0);\n\n\t\tthis.onclick = (event) => {\n\t\t\tconsole.log(event.offsetX, ' ', event.offsetY);\n\t\t\t// console.log(event.offsetX * 1000 / this.game_canvas.width);\n\t\t\tbus.emit('left-click', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\n\t\tthis.mousemove = (event) => {\n\t\t\tbus.emit('mousemove', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\t\tthis.contextmenu = (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tbus.emit('contextmenu', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\t\tthis.clickChangeBut = (event) => {\n\t\t\tbus.emit('left-click-change', {});\n\t\t};\n\t\t// this.mousemovecanvas = (event) => {\n\t\t// \tbus.emit('mousemove-change', {x: event.x- screen.width * 0.8, y: event.y});\n\t\t// };\n\t\t// this.conkekstcanvas = (event) => {\n\t\t// \tevent.preventDefault();\n\t\t// \tbus.emit('contextmenu-change', {x: event.x - screen.width * 0.8, y: event.y});\n\t\t// };\n\t}\n\n\t/**\n\t * Turns controls on\n\t */\n\tstart() {\n\t\tthis.game_canvas.addEventListener('click', this.onclick);\n\n\t\tthis.game_canvas.addEventListener('mousemove', this.mousemove);\n\n\t\tthis.game_canvas.addEventListener('contextmenu', this.contextmenu);\n\n\t\tthis.changeBut.addEventListener('click', this.clickChangeBut);\n\t\t//\n\t\t// this.change_canvas.addEventListener('mousemove', this.mousemovecanvas);\n\t\t//\n\t\t// this.change_canvas.addEventListener('contextmenu', this.conkekstcanvas);\n\t}\n\n\t/**\n\t * Turn controls off\n\t */\n\tstop() {\n\t\tthis.game_canvas.removeEventListener('click', this.onclick);\n\n\t\tthis.game_canvas.removeEventListener('mousemove', this.mousemove);\n\n\t\tthis.game_canvas.removeEventListener('contextmenu', this.contextmenu);\n\n\t\tthis.changeBut.removeEventListener('click', this.clickChangeBut);\n\t\t//\n\t\t// this.change_canvas.removeEventListener('mousemove', this.mousemovecanvas);\n\t\t//\n\t\t// this.change_canvas.removeEventListener('contextmenu', this.conkekstcanvas);\n\t}\n}\n\n","import bus from '../../bus.js';\n\nexport const timer = (htmlElement) => {\n\tlet sec = 30;\n\tlet isPaused = false;\n\tlet g = setInterval(() => {\n\t\tif (isPaused) {\n\t\t\t++sec;\n\t\t}\n\t\thtmlElement.innerHTML = --sec;\n\t\tif (sec === 0) {\n\t\t\tclearInterval(g);\n\t\t\tbus.emit('left-click-change', {});\n\t\t}\n\t}, 1000);\n\tbus.on('left-click-change', () => {\n\t\t//sec = 0;\n\t\tclearInterval(g);\n\t});\n\tbus.on('attack', () => {\n\t\tisPaused = true;\n\t\tsetTimeout(() => {isPaused = false;}, 1000);\n\t});\n};","\nexport const battleCalc = (firstRegion, secondRegion) => {\n\t//todo КАКИЕ ТО ПРОЦЕНТЫ АААА\n\tconst result = firstRegion.gameData.units - secondRegion.gameData.units * 2;\n\tif (result > 0) {\n\t\tfirstRegion.gameData.units -= secondRegion.gameData.units * 2;\n\t\tsecondRegion.gameData.units = 0;\n\t\treturn true;\n\t} else {\n\t\tsecondRegion.gameData.units -= firstRegion.gameData.units / 2;\n\t\tfirstRegion.gameData.units = 0;\n\t\treturn false;\n\t}\n};","import {animate} from '../animate.js';\nlet generateAttack = require('../attack/attackAnimation.pug');\nexport const moveAnimation = (x, y, x2, y2) => {\n\n\tconst wrapper = document.getElementsByClassName('wrapper')[0];\n\tconst wrapAnim = document.createElement('div');\n\twrapAnim.classList.add('attack-animation');\n\twrapper.appendChild(wrapAnim);\n\twrapAnim.innerHTML = generateAttack(\n\t\t{\n\t\t\t'width': window.innerWidth * 0.7,\n\t\t\t'height': window.innerHeight,\n\t\t\t'id': 'attack-canvas'\n\t\t}\n\t);\n\tconst canvas = document.getElementById('attack-canvas');\n\tconst ctx = canvas.getContext('2d');\n\tconst cw = ctx.canvas.width;\n\tconst ch = window.innerHeight;\n\tconst lWidth = cw * 0.01;\n\t// canvas.style.marginTop = String(100 - 100 * canvas.height /window.innerHeight * 0.83) / 2 + '%';\n\tconst game_canvas = document.getElementById('game-canvas');\n\tlet result = window.getComputedStyle(game_canvas).marginTop.match(/^[0-9]+/);\n\tlet mTop = Number(result);\n\ty = y + mTop;\n\ty2 = y2 + mTop;\n\n\tconst length = (Math.sqrt((x-x2)*(x-x2) + (y-y2)*(y-y2)));\n\tlet curLength;\n\tlet curX;\n\tlet curY;\n\tlet arrowX;\n\tlet arrowY;\n\tlet arrowX2;\n\tlet arrowY2;\n\tlet constX;\n\tlet constY;\n\tlet diff;\n\tlet part;\n\tconst gradient = ctx.createLinearGradient(x2, y2, x, y);\n\tconst gradientStroke = ctx.createLinearGradient(x2, y2, x, y);\n\n\tanimate(timePassed => {\n\t\tdiff = (timePassed).toFixed(4);\n\t\tpart = diff / 1000;\n\t\tctx.clearRect(0, 0, cw, ch);\n\t\tctx.lineWidth = lWidth;\n\t\tgradient.addColorStop(0, '#030101');\n\t\tgradient.addColorStop(0.5, '#711615');\n\t\tgradient.addColorStop(1, '#ee2357');\n\n\t\tgradientStroke.addColorStop(0, '#030101');\n\t\tgradientStroke.addColorStop(0.5, '#0d3634');\n\t\tgradientStroke.addColorStop(1, '#ee2357');\n\n\n\t\tctx.fillStyle = gradient;\n\t\tctx.strokeStyle = gradientStroke;\n\n\t\tcurX = x2 + (x - x2) * part;\n\t\tcurY = y2 + (y - y2) * part;\n\t\tcurLength = Math.sqrt((curX - x2) * (curX - x2) + (curY - y2) * (curY - y2));\n\t\tif ( curLength <= 0.76 * length) {\n\t\t\tconstX = curX;\n\t\t\tconstY = curY;\n\t\t}\n\t\tif (curLength >= 0.75 * length) {\n\t\t\tarrowX = 0.2*(y - y2) + constX;\n\t\t\tarrowY = 0.2*(x2 - x) + constY;\n\t\t\tarrowX2 = -0.2*(y - y2) + constX;\n\t\t\tarrowY2 = -0.2*(x2 - x) + constY;\n\t\t\tctx.moveTo(arrowX, arrowY);\n\t\t\tctx.lineTo(arrowX  + (x - arrowX) * part, arrowY  + (y - arrowY) * part);\n\t\t\tctx.moveTo(arrowX2, arrowY2);\n\t\t\tctx.lineTo(arrowX2 + (x - arrowX2) * part, arrowY2  + (y  - arrowY2) * part);\n\t\t}\n\n\t\tctx.moveTo(x2, y2);\n\t\tctx.lineTo(curX, curY);\n\n\n\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t\t// ctx.arc(600, 100, 50, start, diff/10+start, false);\n\n\t}, 1000);\n\tsetTimeout(() => {\n\t\twrapper.removeChild(wrapper.lastChild);\n\t}, 1000);\n};","import {animate} from './animate.js';\n\nexport const animationOverlay = (x , y) => {\n\n\tconst wrapper = document.getElementsByClassName('wrapper')[0];\n\tconst wrapAnim = document.createElement('div');\n\twrapAnim.classList.add('overlay');\n\n\tconst canvas = document.createElement('canvas');\n\twrapAnim.appendChild(canvas);\n\tcanvas.setAttribute('id', 'overlay');\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n\twrapper.appendChild(wrapAnim);\n\tconst ctx = canvas.getContext('2d');\n\t// canvas.style.marginTop = String(100 - 100 * canvas.height / window.innerHeight * 0.83) / 2 + '%';\n\tconst game_canvas = document.getElementById('game-canvas');\n\tlet result = window.getComputedStyle(game_canvas).marginTop.match(/^[0-9]+/);\n\tlet mTop = Number(result);\n\ty = y + mTop;\n\n\t//.style.marginTop = String(100 - 100 * canvas.height / window.innerHeight * 0.83) / 2 + '%';\n\tconst start = 4.72;\n\tconst cw = ctx.canvas.width;\n\tconst ch = ctx.canvas.height;\n\tlet diff;\n\tconst gradient = ctx.createLinearGradient(\n\t\tx - cw * 0.02 * 0.66,\n\t\ty - cw * 0.02 * 0.66,\n\t\tx + cw * 0.02 * 0.66,\n\t\ty + cw * 0.02 * 0.66\n\t);\n\tconst gradientStroke = ctx.createLinearGradient(\n\t\tx - cw * 0.02 * 0.66,\n\t\ty - cw * 0.02 * 0.66,\n\t\tx + cw * 0.02 * 0.66,\n\t\ty + cw * 0.02 * 0.66\n\t);\n\tanimate(function(timePassed) {\n\t\tdiff = ((timePassed / 1000) * Math.PI*2*10).toFixed(2);\n\t\tctx.clearRect(0, 0, cw, ch);\n\t\tctx.lineWidth = 10; //TODO шириной радиуса\n\t\tgradient.addColorStop(0, '#030101');\n\t\tgradient.addColorStop(0.5, '#711615');\n\t\tgradient.addColorStop(1, '#ee2357');\n\n\t\tgradientStroke.addColorStop(0, '#030101');\n\t\tgradientStroke.addColorStop(0.5, '#0d3634');\n\t\tgradientStroke.addColorStop(1, '#ffffff');\n\n\t\tctx.fillStyle = gradient;\n\t\tctx.strokeStyle = gradientStroke;\n\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, cw * 0.02, start, diff/10+start, false);\n\t\tctx.stroke();\n\t\t// ctx.fill();\n\t}, 1000);\n\tsetTimeout(() => {\n\t\twrapper.removeChild(wrapper.lastChild);\n\t}, 1000);\n};","import {animate} from '../animate.js';\nlet generateAttack = require('./attackAnimation.pug');\n\n\nexport const attackAnimation = (x, y, x2, y2) => {\n\tconst wrapper = document.getElementsByClassName('wrapper')[0];\n\tconst wrapAnim = document.createElement('div');\n\twrapAnim.classList.add('attack-animation');\n\twrapper.appendChild(wrapAnim);\n\twrapAnim.innerHTML = generateAttack(\n\t\t{\n\t\t\t'width': window.innerWidth * 0.7,\n\t\t\t'height': window.innerHeight,\n\t\t\t'id': 'attack-canvas'\n\t\t}\n\t);\n\tconst canvas = document.getElementById('attack-canvas');\n\tconst ctx = canvas.getContext('2d');\n\tconst cw = ctx.canvas.width;\n\tconst ch = window.innerHeight;\n\tconst game_canvas = document.getElementById('game-canvas');\n\tlet result = window.getComputedStyle(game_canvas).marginTop.match(/^[0-9]+/);\n\tlet mTop = Number(result);\n\ty = y + mTop;\n\ty2 = y2 + mTop;\n\tconst radius = cw * 0.03;\n\tconst lWidth = cw * 0.01;\n\tconst startX = (x - radius * Math.sin(Math.PI / 4));\n\tconst startY = (y - radius * Math.sin(Math.PI / 4));\n\tconst endX = (x + radius * Math.sin(Math.PI / 4));\n\tconst endY = (y + radius * Math.sin(Math.PI / 4));\n\tlet diff;\n\tlet part;\n\tconst gradient = ctx.createLinearGradient(startX, startY, endX, endY);\n\tconst gradientStroke = ctx.createLinearGradient(startX, startY, endX, endY);\n\n\tanimate(timePassed => {\n\t\tdiff = (timePassed).toFixed(2);\n\t\tpart = diff / 1000;\n\t\tctx.clearRect(0, 0, cw, ch);\n\t\tctx.lineWidth = lWidth;\n\t\tgradient.addColorStop(0, '#030101');\n\t\tgradient.addColorStop(0.5, '#711615');\n\t\tgradient.addColorStop(1, '#ee2357');\n\n\t\tgradientStroke.addColorStop(0, '#030101');\n\t\tgradientStroke.addColorStop(0.5, '#0d3634');\n\t\tgradientStroke.addColorStop(1, '#ee2357');\n\n\n\t\tctx.fillStyle = gradient;\n\t\tctx.strokeStyle = gradientStroke;\n\t\tconst secondX = 2 * radius * Math.sin(Math.PI / 4) + startX;\n\t\tif ( diff/10 + startX >= secondX) {\n\t\t\tdiff = 100;\n\t\t}\n\n\t\tctx.moveTo(startX, startY);\n\t\tctx.lineTo(diff/10 + startX, diff/10 + startY);\n\t\tctx.moveTo(secondX, startY);\n\t\tctx.lineTo(secondX - diff/10, diff/10 + startY);\n\n\t\tctx.moveTo(x2, y2);\n\t\tctx.lineTo(x2 + (x - x2) * part, y2 + (y - y2) * part);\n\n\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t}, 1000);\n\tsetTimeout(() => {\n\t\twrapper.removeChild(wrapper.lastChild);\n\t}, 1000);\n\n};\n\n\n\n","import bus from '../bus.js';\nimport {attackAnimation} from './animation/attack/attackAnimation.js';\nimport {animationOverlay} from './animation/animationOverlay.js';\nimport {moveAnimation} from './animation/move/moveAnimation.js';\nimport {renderScene} from './helperFuncs/renderScene.js';\nimport {battleCalc} from './helperFuncs/battleCalc.js';\nimport PLAYER_STATES from './config/playerStates.js';\nimport MainPlayer from './player/mainPlayer.js';\nimport BotPlayer from './player/botPlayer.js';\nimport {timer} from './helperFuncs/timer.js';\n\n\n/**\n * Class representing game logic\n */\nexport default class GameManager {\n\t/**\n\t * Creates logic =)\n\t * @param controller\n\t */\n\tconstructor(controller, canvas, regions, img, mode) {\n\t\tthis.mode = mode;\n\t\tthis.controller = controller;\n\t\tthis.regions = regions;\n\t\tthis.canvas = canvas;\n\t\tthis.img = img;\n\t\tthis.timer = document.getElementById('timer');\n\t\tthis.log = document.getElementById('log');\n\t}\n\n\n\t/**\n\t * Starts game logic 8)\n\t */\n\tstart() {\n\t\ttimer(this.timer);\n\t\tthis.select_region = (data) => {\n\t\t\tconst region = data.payload;\n\t\t\tregion.selected = true;\n\t\t\tregion.area.setStroke('red');\n\t\t\t//todo:: попробовать запускать последовательно\n\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t};\n\t\tthis.change_selection = (data) => {\n\t\t\tconst regions = data.payload;\n\t\t\tregions.active.selected = false;\n\t\t\tregions.new.selected = true;\n\t\t\tlet setNewColor = new Promise((resolve, reject) => {\n\t\t\t\tresolve(regions.new.area.setStroke('red'));\n\t\t\t});\n\t\t\tlet setActiveColor = new Promise((resolve, reject) => {\n\t\t\t\tresolve(regions.active.area.setStroke('white'));\n\t\t\t});\n\t\t\tsetNewColor\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\tsetActiveColor\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t};\n\t\tthis.attack = (data) => {\n\t\t\tanimationOverlay(window.innerWidth / 2, this.canvas.height * 0.92);\n\n\t\t\tconst regions = data.payload;\n\t\t\tconst from = regions.from;\n\t\t\tconst to = regions.to;\n\n\t\t\tattackAnimation(to.area.xC, to.area.yC, from.area.xC, from.area.yC);\n\n\n\t\t\t//true если первый, false если второй\n\t\t\tconst fromWin = battleCalc(from, to);\n\t\t\tsetTimeout(() => {\n\n\t\t\t\tif (fromWin) {\n\t\t\t\t\tto.setColor(from.getColor());\n\t\t\t\t\tto.owner.delRegion(to);\n\n\t\t\t\t\tif (to.owner.regions.length === 0) {\n\t\t\t\t\t\tto.owner.setStatus(PLAYER_STATES.DISABLED);\n\t\t\t\t\t\tbus.emit('delete-from-queue', to.owner);\n\n\t\t\t\t\t}\n\t\t\t\t\tbus.emit('update-neighbour', {\n\t\t\t\t\t\tfrom: from,\n\t\t\t\t\t\tto: to\n\t\t\t\t\t});\n\t\t\t\t\tfrom.owner.addRegion(to);\n\t\t\t\t\tto.area.setStroke('white');\n\t\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t\t}\n\t\t\t}, 1000);\n\n\t\t\tthis.log.innerHTML = '<p>Player ' + from.name + ' attacked ' + to.name + '</p>';\n\t\t};\n\t\tthis.change_move = (dict) => {\n\t\t\tthis.regions.forEach(region => {\n\t\t\t\tregion.area.setStroke('black');\n\t\t\t});\n\t\t\tconst data = dict.payload;\n\t\t\t//data.switcher.reDraw('red');\n\t\t\tdata.current.setStatus(PLAYER_STATES.DISABLED);\n\t\t\tdata.next.setStatus(PLAYER_STATES.DEFAULT);\n\t\t\tif (data.next instanceof MainPlayer) {\n\t\t\t\t//вызываем таймер заного для текущего игрока\n\n\t\t\t\tdata.next.regions.forEach(region => {\n\t\t\t\t\tregion.area.setStroke('white');\n\t\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t\t});\n\t\t\t\ttimer(this.timer);\n\t\t\t\tthis.controller.start();\n\t\t\t}\n\t\t\telse if (data.next instanceof BotPlayer) {\n\t\t\t\tdata.next.regions.forEach(region => {\n\t\t\t\t\tregion.area.setStroke('white');\n\t\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t\t});\n\t\t\t\tthis.controller.stop();\n\t\t\t\tbus.emit('bot-move', data.next);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.controller.stop();\n\t\t\t}\n\t\t};\n\t\tthis.illum_cur = (data) => {\n\t\t\tconst curPlayer = data.payload;\n\t\t\tcurPlayer.regions.forEach(region => {\n\t\t\t\tregion.area.setStroke('white');\n\t\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\t});\n\t\t};\n\t\tthis.move_units = (data) => {\n\t\t\tconst regions = data.payload;\n\t\t\tregions.active.selected = false;\n\t\t\tregions.new.selected = true;\n\t\t\tregions.new.area.setStroke('red');\n\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t\tregions.active.area.setStroke('white');\n\t\t\tmoveAnimation(\n\t\t\t\tregions.new.area.xC, regions.new.area.yC,\n\t\t\t\tregions.active.area.xC, regions.active.area.yC\n\t\t\t);\n\t\t\trenderScene(this.canvas, this.regions, this.img);\n\t\t};\n\n\t\tbus.on('change-selection', this.change_selection);\n\t\tbus.on('select-region', this.select_region);\n\t\tbus.on('change-move', this.change_move);\n\t\tbus.on('move-units', this.move_units);\n\t\tbus.on('illum-cur', this.illum_cur);\n\t\tbus.on('attack', this.attack);\n\t}\n\n\n\t/**\n\t * destroys game logic ;)\n\t */\n\tdestroy() {\n\t\tbus.off('change-selection', this.change_selection);\n\t\tbus.off('select-region', this.select_region);\n\t\tbus.off('change-move', this.change_move);\n\t\tbus.off('move-units', this.move_units);\n\t\tbus.off('illum-cur', this.illum_cur);\n\t\tbus.off('attack', this.attack);\n\t}\n}","export const reachMatrix = [\n\t[0, 1, 1, 1, 0],\n\t[1, 0, 1, 1, 1],\n\t[1, 1, 0, 0, 0],\n\t[1, 1, 0, 0, 1],\n\t[0, 1, 0, 1, 0]\n];","/* eslint-disable no-undef */\nimport bus from '../bus.js';\n\n/**\n * Class represents Hexagon graphical element\n */\nexport default class Hexagon {\n\t/**\n\t * Creates Hexagon\n\t * @param canvas\n\t * @param xC\n\t * @param yC\n\t * @param color\n\t */\n\tconstructor(name, canvas, xC, yC, color, coordinate) {\n\t\tthis.name = name;\n\t\tthis.canvas = canvas;\n\t\tthis.game_ctx = this.canvas.getContext('2d');\n\t\tthis.draw(xC, yC, color);\n\t\tthis.xC = xC;\n\t\tthis.yC = yC;\n\t\tthis.color = color;\n\t\tthis.strokeColor = 'black';\n\t\tbus.on('resize-for-draw', () => {\n\t\t\t//todo: далее с соседями\n\t\t\t//todo: сделать кексы прозрачными плюс фон\n\t\t\tfor (let i = 0; i < coordinate.allowedCoord.length; i++) {\n\t\t\t\t//console.log(coordinate.allowedCoord.length, '      length');\n\t\t\t\tif (coordinate.allowedCoord[i].name === this.name) {\n\t\t\t\t\tthis.xC = coordinate.allowedCoord[i].x;\n\t\t\t\t\tthis.yC = coordinate.allowedCoord[i].y;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} \n\t\t\tthis.draw();\n\n\t\t});\n\t}\n\n\t/**\n\t * Draws graphical element\n\t * @param xC\n\t * @param yC\n\t * @param color\n\t */\n\n\tsetColor(color) {\n\t\tthis.color = color;\n\t}\n\tgetColor() {\n\t\treturn this.color;\n\t}\n\tsetStroke(color) {\n\t\tthis.strokeColor = color;\n\t}\n\n\tdraw() {\n\t\tconst amountofCoorX = 1000;\n\t\tconst amountofCoorY = 610;\n\t\tthis.R = 90;\n\t\tthis.dR = this.R * 0.866;\n\t\tthis.xp = [\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX\n\t\t];\n\t\tthis.yp = [\n\t\t\tthis.yC,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC,\n\t\t\tthis.yC - this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC - this.dR *this.canvas.height / amountofCoorY,\n\t\t\tthis.yC\n\t\t];\n\t\tthis.game_ctx.beginPath();\n\t\tthis.game_ctx.lineJoin = 'round';\n\t\tthis.game_ctx.lineWidth = 4;\n\t\tthis.game_ctx.moveTo(this.xp[0], this.yp[0]);\n\t\tfor (let i = 1; i < this.xp.length; ++i) {\n\t\t\tthis.game_ctx.lineTo(this.xp[i], this.yp[i]);\n\t\t}\n\t\tthis.game_ctx.strokeStyle = this.strokeColor;\n\t\tthis.game_ctx.stroke();\n\t\tthis.game_ctx.fillStyle = this.color;\n\t\t// this.game_ctx.fillStyle = 'rgba(100,150,185,0.4)';\n\t\tthis.game_ctx.fill();\n\t\tthis.game_ctx.closePath();\n\t}\n\n\n\n\treColor () {\n\t\tconst amountofCoorX = 1000;\n\t\tconst amountofCoorY = 610;\n\t\tthis.xp = [\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX\n\t\t];\n\t\tthis.yp = [\n\t\t\tthis.yC,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC,\n\t\t\tthis.yC - this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC - this.dR *this.canvas.height / amountofCoorY,\n\t\t\tthis.yC\n\t\t];\n\t\tthis.game_ctx.beginPath();\n\t\t// this.game_ctx.lineJoin = 'round';\n\t\t// this.game_ctx.lineWidth = 1;\n\t\tthis.game_ctx.moveTo(this.xp[0], this.yp[0]);\n\t\tfor (let i = 1; i < this.xp.length; ++i) {\n\t\t\tthis.game_ctx.lineTo(this.xp[i], this.yp[i]);\n\t\t}\n\t\tthis.game_ctx.strokeStyle = 'rgba(255,255,255,0.8)';\n\t\tthis.game_ctx.stroke();\n\t\t// this.game_ctx.fillStyle = this.color;\n\t\t// // this.game_ctx.fillStyle = 'rgba(100,150,185,0.4)';\n\t\t// this.game_ctx.fill();\n\t\tthis.game_ctx.closePath();\n\t}\n\n}","/* eslint-disable no-undef */\nimport Hexagon from '../../graphics/hexagon.js';\nimport {reachMatrix} from '../config/reach.js';\nimport bus from '../../bus.js';\n/**\n * Class representing game region\n */\nexport default class Region {\n\t/**\n\t * Creates Region\n\t * @param name\n\t * @param owner\n\t * @param canvas\n\t * @param coordinate\n\t */\n\tconstructor(name, owner, canvas, coordinate, units) {\n\t\tthis.name = name;\n\t\tthis.canvas = canvas;\n\t\tthis.game_ctx = this.canvas.getContext('2d');\n\t\tthis.selected = false;\n\t\tthis.allowedCoordinates = coordinate.allowedCoord;\n\t\tthis.coordinate = coordinate;\n\t\tthis.owner = owner;\n\t\tthis.color = owner.color;\n\t\tthis.gameData = {\n\t\t\tunits: units\n\t\t};\n\t\tthis.setBusListeners();\n\t\tthis.area = null;\n\t\tthis.label = null;\n\t\tthis.globalRegions = null;\n\t\tthis.neighbour = null;\n\t\tthis.number = null;\n\t\tthis.init();\n\t}\n\n\tsetColor(color) {\n\t\tthis.area.setColor(color);\n\t}\n\n\tgetColor() {\n\t\treturn this.area.getColor();\n\t}\n\n\tsetGlobalRegions(regions) {\n\t\tthis.globalRegions = regions;\n\t}\n\n\trenderHex() {\n\t\tthis.area.draw();\n\t}\n\n\t/**\n\t * Draws Region and sets it up\n\t */\n\tinit() {\n\t\tfor (let i = 0; i < this.allowedCoordinates.length; ++i) {\n\t\t\tif (this.allowedCoordinates[i].allowed) {\n\t\t\t\tthis.area = new Hexagon(\n\t\t\t\t\tthis.allowedCoordinates[i].name,\n\t\t\t\t\tthis.canvas, this.allowedCoordinates[i].x,\n\t\t\t\t\tthis.allowedCoordinates[i].y,\n\t\t\t\t\tthis.color,\n\t\t\t\t\tthis.coordinate\n\t\t\t\t);\n\t\t\t\tthis.number = i;\n\t\t\t\tthis.neighbour = this.allowedCoordinates[i].neighbour;\n\t\t\t\tthis.label = this.allowedCoordinates[i].name;\n\t\t\t\tthis.allowedCoordinates[i].allowed = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetNeighbours(num) {\n\t\treachMatrix[num].forEach(temp => {\n\t\t\tif (temp === 1) {\n\t\t\t\tthis.neighbour.push(temp + 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetBusListeners() {\n\t\tbus.on('update-neighbour', dict => {\n\t\t\tconst data = dict.payload;\n\t\t\t//debugger;\n\t\t\tif (data.from.name === this.name) {\n\t\t\t\tthis.removeNeighbour(data.to.name);\n\t\t\t} else if(data.to.name === this.name) {\n\n\t\t\t\tdata.from.owner.regions.forEach(temp => {\n\t\t\t\t\tthis.removeNeighbour(temp.name);\n\t\t\t\t});\n\t\t\t\tdata.to.owner.regions.forEach(temp => {\n\n\t\t\t\t\tif (reachMatrix[data.to.number][temp.number] === 1) {\n\t\t\t\t\t\tlet f = false;\n\t\t\t\t\t\tfor (let i = 0; i < data.to.neighbour.length; ++i) {\n\t\t\t\t\t\t\tif (data.to.neighbour[i] === temp.name)  {\n\t\t\t\t\t\t\t\tf = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (f === false) {\n\t\t\t\t\t\t\tdata.to.neighbour.push(temp.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\t// debugger;\n\t\t\t\tthis.globalRegions.forEach(region => {\n\t\t\t\t\tif (region.name === data.to.name) {\n\t\t\t\t\t\tif (reachMatrix[this.number][region.number] === 1) {\n\t\t\t\t\t\t\tlet f = false;\n\t\t\t\t\t\t\tfor (let i = 0; i < this.neighbour.length; ++i) {\n\t\t\t\t\t\t\t\tif (this.neighbour[i] === data.to.name) {\n\t\t\t\t\t\t\t\t\tf = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (f === false) {\n\t\t\t\t\t\t\t\tthis.neighbour.push(data.to.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tbus.on('change-move', data => {\n\t\t\t//todo какое то будущее, прослушал все((\n\t\t\tthis.gameData.units += 1000;\n\t\t});\n\t}\n\n\tremoveNeighbour(name) {\n\t\tthis.neighbour.forEach((cur, i) => {\n\t\t\tif (cur === name) {\n\t\t\t\tthis.neighbour.splice(i, 1);\n\t\t\t}\n\t\t});\n\t\tconsole.log(this.name, '  ', this.neighbour);\n\t}\n}","/**\n * Returns random number between min and max\n * @param min\n * @param max\n * @return {*}\n */\nconst getRandom = (min, max) => {\n\treturn Math.floor((Math.random() * (max - min))) + min;\n};\nexport default getRandom;","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport bus from '../../../modules/bus.js';\nimport Game from '../../../modules/game/game.js';\nimport Coordinate from '../../../modules/game/config/coordinate.js';\nimport {GameModes} from '../../../modules/game/config/modes.js';\nlet generateCanvas = require('../gameView/gameTemplate.pug');\n\nexport default class MultiplayerSection extends Section {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.parent = document.getElementById('game');\n\t\tthis.wrapper = document.createElement('div');\n\t\tthis.wrapper.classList.add('wrapper');\n\t\t//todo поменять где надо айдишники\n\n\t\tthis.wrapper.innerHTML += generateCanvas(\n\t\t\t{\n\t\t\t\t'width': window.innerWidth * 0.7,\n\t\t\t\t'height': window.innerWidth * 0.525 * 0.83,\n\t\t\t\t'id': 'multiplayer-canvas'\n\t\t\t}\n\t\t);\n\n\t\t// this.wrapper.getElementsByClassName('info-menu')[0].setAttribute('style', window.innerWidth * 0.525 * 0.83);\n\t\tthis.parent.appendChild(this.wrapper);\n\t\tthis.game_canvas = document.getElementById('multiplayer-canvas');\n\t\tthis.ctx = this.game_canvas.getContext('2d');\n\t}\n\n\trender() {\n\n\t\tthis.img = new Image();\n\t\tthis.img.src = '/map.png';\n\t\tthis.load = new Promise((resolve, reject) => {\n\t\t\tthis.img.onload = () => {\n\t\t\t\tresolve(this.ctx.drawImage(this.img, 0, 0, this.game_canvas.width, this.game_canvas.height));\n\t\t\t};\n\t\t});\n\t\tthis.load\n\t\t\t.then(\n\t\t\t\t() => {\n\t\t\t\t\tthis.setWindowResizeHandler();\n\t\t\t\t\tthis.coordinate = new Coordinate(this.game_canvas);\n\t\t\t\t\tthis.changeBut = this.wrapper.getElementsByClassName('change')[0];\n\t\t\t\t\tthis.game = new Game(GameModes.multiplayer, this.game_canvas, this.coordinate, this.changeBut, this.img);\n\t\t\t\t\t// this.game.start();\n\n\t\t\t\t}\n\t\t\t);\n\n\t\treturn this.wrapper;\n\t}\n\n\tallowed() {\n\t\treturn true;\n\t}\n\n\tcomputeCanvasSize() {\n\t\t// const size = (window.innerWidth > window.innerHeight) ? window.innerHeight : window.innerWidth;\n\t\treturn [window.innerWidth * 0.7, window.innerWidth * 0.525 * 0.83];\n\t}\n\n\tsetWindowResizeHandler() {\n\t\twindow.addEventListener('resize', () => {\n\t\t\t[this.game_canvas.width, this.game_canvas.height] = this.computeCanvasSize();\n\t\t\tthis.ctx.drawImage(this.img, 0, 0, this.game_canvas.width, this.game_canvas.height);\n\t\t\tthis.coordinate.reSize(this.game_canvas);\n\t\t\tbus.emit('resize-for-draw', {});\n\t\t});\n\t\treturn this;\n\t}\n}\n\n\n\n","'use strict';\n\nimport MultiplayerSection from './components/views/multiplayerView/multiplayerView.js';\nimport RegisterSection from './components/views/registerView/registerView.js';\nimport ProfileSection from './components/views/profileView/profileView.js';\nimport RatingSection from './components/views/ratingView/ratingView.js';\nimport LoginSection from './components/views/loginView/loginView.js';\nimport MenuSection from './components/views/menuView/menuView.js';\nimport GameSection from './components/views/gameView/gameView.js';\nimport User from './modules/userModel.js';\nimport Router from './modules/router.js';\n\nconst root = document.getElementById('application');\nconst globalRoot = document.getElementById('body');\n\n// if ('serviceWorker' in navigator) {\n// \tnavigator.serviceWorker.register('/sw.js', {scope: '/'})\n// \t\t.catch((err) => {\n// \t\t\tconsole.log('Service worker error: ' + err);\n// \t\t});\n// }\n\nUser.auth()\n\t.then( () => {\n\t\tnew Router(root, globalRoot)\n\t\t\t.add('/', MenuSection)\n\t\t\t.add('/register', RegisterSection)\n\t\t\t.add('/profile', ProfileSection)\n\t\t\t.add('/rating', RatingSection)\n\t\t\t.add('/multiplayer', MultiplayerSection)\n\t\t\t.add('/singleplayer', GameSection)\n\t\t\t.add('/login', LoginSection)\n\t\t\t.start();\n\t})\n\t.catch();\n","/**\n * @type {HTMLCollectionOf<Element>}\n */\n\nvar radar = document.getElementById( 'radar' ),\n\tdiameter = Math.min(document.getElementById( 'radar-wrapper' ).offsetHeight,document.getElementById( 'radar-wrapper' ).offsetWidth)-100,\n\tradius = diameter / 2,\n\tpadding = 14,\n\tctx = Sketch.create({\n\t\tcontainer: radar,\n\t\tfullscreen: false,\n\t\twidth: diameter,\n\t\theight: diameter\n\t}),\n\n\tdToR = function( degrees ){\n\t\treturn degrees * (Math.PI / 180);\n\t},\n\tsweepAngle = 270,\n\tsweepSize = 2,\n\tsweepSpeed = 1.2,\n\trings = 4,\n\thueStart = 120,\n\thueEnd = 170,\n\thueDiff = Math.abs( hueEnd - hueStart ),\n\tsaturation = 50,\n\tlightness = 40,\n\tlineWidth = 2,\n\tgradient = ctx.createLinearGradient( radius, 0, 0, 0 );\n\n\nradar.style.marginLeft = radar.style.marginTop = ( -diameter / 2 ) - padding + 'px';\ngradient.addColorStop( 0, 'hsla( ' + hueStart + ', ' + saturation + '%, ' + lightness + '%, 1 )' );\ngradient.addColorStop( 1, 'hsla( ' + hueEnd + ', ' + saturation + '%, ' + lightness + '%, 0.1 )' );\n\nvar renderRings = function(){\n\tvar i;\n\tfor( i = 0; i < rings; i++ ){\n\t\tctx.beginPath();\n\t\tctx.arc( radius, radius, ( ( radius - ( lineWidth / 2) ) / rings) * ( i + 1 ), 0, TWO_PI, false );\n\t\tctx.strokeStyle = 'hsla(' + ( hueEnd - ( i * ( hueDiff / rings ) ) ) + ', ' + saturation + '%, ' + lightness + '%, 0.1)';\n\t\tctx.lineWidth = lineWidth;\n\t\tctx.stroke();\n\t};\n};\n\nvar renderGrid = function(){\n\tctx.beginPath();\n\tctx.moveTo( radius - lineWidth / 2, lineWidth );\n\tctx.lineTo( radius - lineWidth / 2, diameter - lineWidth );\n\tctx.moveTo( lineWidth, radius - lineWidth / 2 );\n\tctx.lineTo( diameter - lineWidth, radius - lineWidth / 2 );\n\tctx.strokeStyle = 'hsla( ' + ( ( hueStart + hueEnd ) / 2) + ', ' + saturation + '%, ' + lightness + '%, .03 )';\n\tctx.stroke();\n};\n\nvar renderSweep = function(){\n\tctx.save();\n\tctx.translate( radius, radius );\n\tctx.rotate( dToR(sweepAngle) );\n\tctx.beginPath();\n\tctx.moveTo( 0, 0 );\n\tctx.arc( 0, 0, radius, dToR( -sweepSize ), dToR( sweepSize ), false );\n\tctx.closePath();\n\tctx.fillStyle = gradient;\n\tctx.fill();\n\tctx.restore();\n};\n\nvar renderScanLines = function(){\n\tvar i;\n\tvar j;\n\tctx.beginPath();\n\tfor( i = 0; i < diameter; i += 2 ){\n\t\tctx.moveTo( 0, i + .5 );\n\t\tctx.lineTo( diameter, i + .5);\n\t};\n\tctx.lineWidth = 1;\n\tctx.strokeStyle = 'hsla( 0, 0%, 0%, .02 )';\n\tctx.globalCompositeOperation = 'source-over';\n\tctx.stroke();\n};\n\nctx.clear = function(){\n\tctx.globalCompositeOperation = 'destination-out';\n\tctx.fillStyle = 'hsla( 0, 0%, 0%, 0.1 )';\n\tctx.fillRect( 0, 0, diameter, diameter );\n};\n\nctx.update = function(){\n\tsweepAngle += sweepSpeed;\n};\n\nctx.draw = function(){\n\tctx.globalCompositeOperation = 'lighter';\n\trenderRings();\n\trenderGrid();\n\trenderSweep();\n\trenderScanLines();\n};","import '../public/css/reset.css';\nimport '../public/css/main.css';\nimport '../public/js/components/blocks/input/input.css';\nimport '../public/js/components/blocks/button.css';\nimport '../public/js/components/blocks/decorations/lamp.css';\nimport '../public/js/components/blocks/decorations/plank.css';\nimport '../public/js/components/blocks/decorations/screw.css';\nimport '../public/js/components/views/ratingView/rating.css';\nimport '../public/js/components/views/profileView/profile.css';\nimport '../public/js/components/forms/loadPictureForm/loadPictureForm.css';\nimport '../public/js/components/views/menuView/menu.css';\nimport '../public/js/components/views/ViewsBack.css';\nimport '../public/js/components/radar/radar.css';\nimport '../public/js/components/views/gameView/gameView.css';\n\n// import '../public/js/modules/sketch.js';\nimport '../public/js/components/radar/radar.js';\nimport '../public/js/application.js';\n"],"sourceRoot":""}